import w from"./detail.140bc375.js";import{C as z}from"./index.76253dc2.js";import{bo as k,u as C,t as l,b5 as D,d as b,a as I,at as R,e as A,w as U,ba as j,c as a,ak as L}from"./index.ccaa682a.js";import{E as V}from"./EditOutlined.84f6aa5d.js";import{D as x}from"./DeleteOutlined.b64cb1c2.js";import{N as M}from"./Tooltip.14e7654c.js";import{N as y}from"./Button.3394f0e3.js";import{N as v}from"./Icon.808259cb.js";import{N as O}from"./Popconfirm.b8629776.js";import{N as u}from"./Space.f435ce00.js";import{d as E,a as H}from"./index.33965dcc.js";import{p as P}from"./common.0c468cf3.js";import{f as T}from"./index.15a20265.js";import{S as q}from"./SearchOutlined.2201cd30.js";import{N as B}from"./Input.f12e0137.js";import{N as $,a as F}from"./DataTable.f685dba1.js";import"./lodash.02988b15.js";import"./service.ae1ed8a7.js";import"./index.c665300e.js";import"./index.c1fd473c.js";import"./keysOf.10525521.js";import"./Card.915ef7d2.js";import"./use-rtl.d43d8217.js";import"./resolve-slot.d8d7b3cb.js";import"./index.7a579f81.js";import"./index.99c68204.js";import"./flatten.995f807f.js";import"./Scrollbar.0dc514b7.js";import"./fade-in.cssr.ac08f6bb.js";import"./VResizeObserver.c3d2397d.js";import"./fade-in-scale-up.cssr.5995d390.js";import"./utils.381519a7.js";import"./is-browser.f4bc45cf.js";import"./get-elements-by-json.91f61f52.js";import"./Form.b41344c3.js";import"./FormItem.6b297844.js";import"./format-length.a0cbed4d.js";import"./Grid.8c7d7ba0.js";import"./get-slot.7f666ba0.js";import"./next-frame-once.e5ee25e8.js";import"./Spin.6c6d001b.js";import"./use-compitable.d1fd83c6.js";import"./Radio.0f909e72.js";import"./RadioGroup.8830dbe4.js";import"./index.9532c9b8.js";import"./Switch.97f1d4b9.js";import"./InputNumber.9bdbbaa6.js";import"./use-locale.ca4c738c.js";import"./Add.57f827bb.js";import"./Select.a0f44759.js";import"./Selection.57d091a8.js";import"./Popover.b48d5d17.js";import"./Suffix.584d00eb.js";import"./Checkbox.ff1b56b7.js";import"./TreeSelect.8a08df17.js";import"./SettingOutlined.675e55ec.js";import"./PauseCircleOutlined.f81cacab.js";import"./CloseCircleOutlined.7f4d3411.js";import"./CheckCircleOutlined.b6132804.js";import"./ArrowDown.c45c82c0.js";import"./Dropdown.16d7f975.js";import"./ChevronRight.efc71575.js";import"./use-keyboard.db487137.js";import"./Ellipsis.31968545.js";import"./Forward.6cc09413.js";function G(){return{IS_ADMIN:k().getUserInfo.userType==="ADMIN_USER"}}function J(e){const{t}=C();return{getColumns:()=>[{title:"#",key:"index",render:(n,s)=>s+1},{title:t("security.alarm_instance.alarm_instance_name"),key:"instanceName"},{title:t("security.alarm_instance.alarm_plugin_name"),key:"alertPluginName"},{title:t("security.alarm_instance.create_time"),key:"createTime"},{title:t("security.alarm_instance.update_time"),key:"updateTime"},{title:t("security.alarm_instance.operation"),key:"operation",width:150,render:n=>l(u,null,{default:()=>[l(M,null,{trigger:()=>l(y,{circle:!0,type:"info",size:"small",onClick:()=>void e(n,"edit")},{default:()=>l(v,null,{default:()=>l(V)})}),default:()=>t("security.alarm_instance.edit")}),l(M,null,{trigger:()=>l(O,{onPositiveClick:()=>void e(n,"delete"),negativeText:t("security.alarm_instance.cancel"),positiveText:t("security.alarm_instance.confirm")},{trigger:()=>l(y,{circle:!0,type:"error",size:"small"},{default:()=>l(v,null,{default:()=>l(x)})}),default:()=>t("security.alarm_instance.delete_confirm")}),default:()=>t("security.alarm_instance.delete")})]})}]}}function K(){const e=D({page:1,pageSize:10,itemCount:0,searchVal:"",list:[],loading:!1}),t=async()=>{if(e.loading)return;e.loading=!0;const{totalList:i,total:p}=await H({pageNo:e.page,pageSize:e.pageSize,searchVal:e.searchVal});if(e.loading=!1,!i)throw Error();e.list=i.map(o=>(o.createTime=o.createTime?T(P(o.createTime),"yyyy-MM-dd HH:mm:ss"):"",o.updateTime=o.updateTime?T(P(o.updateTime),"yyyy-MM-dd HH:mm:ss"):"",o)),e.itemCount=p},r=()=>{e.list.length===1&&e.page>1&&--e.page,t()};return{data:e,changePage:i=>{e.page=i,t()},changePageSize:i=>{e.page=1,e.pageSize=i,t()},deleteRecord:async i=>{await E(i),r()},updateList:r}}function Q(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!L(e)}const lt=b({name:"alarm-instance-manage",setup(){var g;const{t:e}=C(),t=I(!1),r=I(),n=I(),{IS_ADMIN:s}=G(),{data:c,changePage:i,changePageSize:p,deleteRecord:o,updateList:_}=K(),{getColumns:d}=J((m,S)=>{S==="edit"?(t.value=!0,r.value=m):o(m.id)}),h=()=>{r.value=null,t.value=!0},N=()=>{t.value=!1,r.value={}},f=(g=R())==null?void 0:g.appContext.config.globalProperties.trim;return A(()=>{i(1),n.value=d()}),U(C().locale,()=>{n.value=d()}),{t:e,IS_ADMIN:s,showDetailModal:t,currentRecord:r,columns:n,...j(c),changePage:i,changePageSize:p,onCreate:h,onCloseModal:N,onUpdatedList:_,trim:f}},render(){const{t:e,IS_ADMIN:t,currentRecord:r,showDetailModal:n,columns:s,list:c,page:i,pageSize:p,itemCount:o,loading:_,changePage:d,changePageSize:h,onCreate:N,onUpdatedList:f,onCloseModal:g}=this;return a(u,{vertical:!0},{default:()=>[a(z,null,{default:()=>{let m;return a(u,{justify:"space-between"},{default:()=>[t&&a(y,{onClick:N,type:"primary",size:"small"},Q(m=e("security.alarm_instance.create_alarm_instance"))?m:{default:()=>[m]}),a(u,{justify:"end",wrap:!1},{default:()=>[a(B,{allowInput:this.trim,value:this.searchVal,"onUpdate:value":S=>this.searchVal=S,size:"small",placeholder:`${e("security.alarm_instance.search_input_tips")}`},null),a(y,{type:"primary",size:"small",onClick:f},{default:()=>[a(v,null,{default:()=>[a(q,null,null)]})]})]})]})}}),a(z,{title:e("menu.alarm_instance_manage")},{default:()=>[a(u,{vertical:!0},{default:()=>[a($,{columns:s,data:c,loading:_,striped:!0},null),a(u,{justify:"center"},{default:()=>[a(F,{page:i,"page-size":p,"item-count":o,"show-quick-jumper":!0,"on-update:page":d,"on-update:page-size":h},null)]})]})]}),t&&a(w,{show:n,currentRecord:r,onCancel:g,onUpdate:f},null)]})}});export{lt as default};
