import{g as Ee,F as Le}from"./get-elements-by-json.91f61f52.js";import{u as m,bK as Pe,t as Y,a as l,e as H,w as x,n as v,J as ue,R as ee,bu as ce,bq as de,b5 as S,bd as Z,d as Ne,c as Re,A as Ce}from"./index.ccaa682a.js";import{A as K,a as se}from"./ArrowUpOutlined.50724439.js";import{N as me}from"./Icon.808259cb.js";import{q as Me}from"./index.db4740c8.js";import{q as Oe}from"./index.8f0bc55d.js";import{q as Ae}from"./index.22db9fb0.js";import{u as U}from"./task-node.ff5737f9.js";import"./service.ae1ed8a7.js";import{l as J}from"./lodash.02988b15.js";import{T as fe}from"./task-type.8f811883.js";import{q as ye,a as te,b as qe,g as Ie}from"./index.ea22358f.js";import{q as De,a as xe,b as Fe}from"./index.97c7c8f2.js";import{e as _e,f as ie,h as le}from"./index.12862679.js";import{l as He}from"./index.10c5a06c.js";import{a as Ye}from"./index.fd192f71.js";import{t as Ge}from"./common.0c468cf3.js";import{N as z}from"./Ellipsis.31968545.js";import{b as Ue,g as Qe,c as X}from"./index.ed11a284.js";import{g as Ve}from"./index.f349419b.js";import"./Form.b41344c3.js";import"./FormItem.6b297844.js";import"./Button.3394f0e3.js";import"./is-browser.f4bc45cf.js";import"./use-rtl.d43d8217.js";import"./resolve-slot.d8d7b3cb.js";import"./format-length.a0cbed4d.js";import"./fade-in.cssr.ac08f6bb.js";import"./keysOf.10525521.js";import"./Grid.8c7d7ba0.js";import"./index.7a579f81.js";import"./utils.381519a7.js";import"./VResizeObserver.c3d2397d.js";import"./flatten.995f807f.js";import"./get-slot.7f666ba0.js";import"./next-frame-once.e5ee25e8.js";import"./Spin.6c6d001b.js";import"./use-compitable.d1fd83c6.js";import"./Input.f12e0137.js";import"./use-locale.ca4c738c.js";import"./Scrollbar.0dc514b7.js";import"./Suffix.584d00eb.js";import"./Radio.0f909e72.js";import"./RadioGroup.8830dbe4.js";import"./Space.f435ce00.js";import"./index.9532c9b8.js";import"./DeleteOutlined.b64cb1c2.js";import"./index.99c68204.js";import"./Switch.97f1d4b9.js";import"./InputNumber.9bdbbaa6.js";import"./Add.57f827bb.js";import"./Select.a0f44759.js";import"./fade-in-scale-up.cssr.5995d390.js";import"./Selection.57d091a8.js";import"./Popover.b48d5d17.js";import"./Checkbox.ff1b56b7.js";import"./TreeSelect.8a08df17.js";import"./SettingOutlined.675e55ec.js";import"./PauseCircleOutlined.f81cacab.js";import"./CloseCircleOutlined.7f4d3411.js";import"./CheckCircleOutlined.b6132804.js";import"./EditOutlined.84f6aa5d.js";import"./index.15a20265.js";import"./Tooltip.14e7654c.js";function k(t){const{t:e}=m();return{type:"input",field:"name",class:"input-node-name",name:e(t===1?"project.node.task_name":"project.node.name"),props:{placeholder:e("project.node.name_tips"),maxLength:100},validate:{trigger:["input","blur"],required:!0,message:e("project.node.name_tips")}}}function w(){const{t}=m(),e=[{label:t("project.node.normal"),value:"YES"},{label:t("project.node.prohibition_execution"),value:"NO"}];return{type:"radio",field:"flag",name:t("project.node.run_flag"),options:e}}function E(){const{t}=m();return{type:"input",field:"description",name:t("project.node.description"),props:{placeholder:t("project.node.description_tips"),rows:2,type:"textarea"}}}function L(){const{t}=m(),e=Pe([{label:"HIGHEST",value:"HIGHEST",icon:K,color:"#ff0000"},{label:"HIGH",value:"HIGH",icon:K,color:"#ff0000"},{label:"MEDIUM",value:"MEDIUM",icon:K,color:"#EA7D24"},{label:"LOW",value:"LOW",icon:se,color:"#2A8734"},{label:"LOWEST",value:"LOWEST",icon:se,color:"#2A8734"}]),o=({node:a,option:r})=>Y(a,null,{default:()=>[Y(me,{color:r.color},{default:()=>Y(r.icon)}),Y("span",{style:{"z-index":1}},r.label)]});return{type:"select",field:"taskPriority",name:t("project.node.task_priority"),options:e,validate:{required:!0},props:{renderOption:o},value:"MEDIUM"}}function P(){const{t}=m(),e=l([]),o=l(!1),a=async()=>{if(o.value)return;o.value=!0;const r=await Me();e.value=r.map(n=>({label:n,value:n})),o.value=!1};return H(()=>{a()}),{type:"select",field:"workerGroup",span:12,name:t("project.node.worker_group"),props:{loading:o},options:e,validate:{trigger:["input","blur"],required:!0,message:t("project.node.worker_group_tips")},value:"default"}}function N(t,e){const{t:o}=m();let a=[];const r=l([]),n=l(!1);let s=!1;const i=async()=>{if(n.value)return;n.value=!0,a=(await Oe()).map(c=>({label:c.name,value:c.code,workerGroups:c.workerGroups})),r.value=a.filter(c=>d(c)),n.value=!1,r.value.length===0?t.environmentCode=null:e&&(t.environmentCode=r.value[0].value)},d=p=>{var c;return!t.workerGroup||!((c=p==null?void 0:p.workerGroups)!=null&&c.length)?!1:p.workerGroups.indexOf(t.workerGroup)!==-1};return x(()=>t.workerGroup,()=>{!t.workerGroup||!s||(r.value=a.filter(p=>d(p)),t.environmentCode=r.value.length===0?null:r.value[0].value)}),H(async()=>{await i(),s=!0}),{type:"select",field:"environmentCode",span:12,name:o("project.node.environment_name"),props:{loading:n,clearable:!0},options:r}}function C(t,e){const{t:o}=m(),a=l([]),r=l(!1),n=v(()=>!t.taskGroupId),s=async()=>{if(r.value)return;r.value=!0;const{totalList:i=[]}=await Ae({pageNo:1,pageSize:2147483647,projectCode:e});a.value=i.map(d=>({label:d.name,value:d.id})),r.value=!1};return H(()=>{s()}),x(()=>t.taskGroupId,i=>{i||(t.taskGroupId=null,t.taskGroupPriority=null)}),[{type:"select",field:"taskGroupId",span:12,name:o("project.node.task_group_name"),props:{loading:r,clearable:!0},options:a},{type:"input-number",field:"taskGroupPriority",name:o("project.node.task_group_queue_priority"),props:{max:Math.pow(10,60)-1,disabled:n},span:12}]}function O(){const{t}=m();return[{type:"input-number",field:"failRetryTimes",name:t("project.node.number_of_failed_retries"),span:12,props:{min:0},slots:{suffix:()=>t("project.node.times")}},{type:"input-number",field:"failRetryInterval",name:t("project.node.failed_retry_interval"),span:12,props:{min:0},slots:{suffix:()=>t("project.node.minute")}}]}function Q(){const{t}=m();return[{type:"input-number",field:"cpuQuota",name:t("project.node.cpu_quota"),span:12,slots:{suffix:()=>"%"},props:{min:-1}},{type:"input-number",field:"memoryMax",name:t("project.node.memory_max"),span:12,slots:{suffix:()=>t("project.node.mb")},props:{min:-1}}]}function I(t){const{t:e}=m();return{type:"input-number",field:"delayTime",name:e("project.node.delay_execution_time"),span:12,props:{min:0},slots:{suffix:()=>e("project.node.minute")},value:t.delayTime||0}}function A(t){const{t:e}=m(),o=v(()=>t.timeoutFlag?12:0),a=[{label:e("project.node.timeout_alarm"),value:"WARN"},{label:e("project.node.timeout_failure"),value:"FAILED"}];return[{type:"switch",field:"timeoutFlag",name:e("project.node.timeout_alarm"),props:{"on-update:value":r=>{r&&(t.timeoutNotifyStrategy.length||(t.timeoutNotifyStrategy=["WARN"]),t.timeout||(t.timeout=30))}}},{type:"checkbox",field:"timeoutNotifyStrategy",name:e("project.node.timeout_strategy"),options:a,span:o,validate:{trigger:["input"],validator(r,n){if(t.timeoutFlag&&!n.length)return new Error(e("project.node.timeout_strategy_tips"))}}},{type:"input-number",field:"timeout",name:e("project.node.timeout_period"),span:o,props:{max:Math.pow(10,10)-1},slots:{suffix:()=>e("project.node.minute")},validate:{trigger:["input"],validator(r,n){if(t.timeoutFlag&&!/^[1-9]\d*$/.test(String(n)))return new Error(e("project.node.timeout_period_tips"))}}}]}function R(){const{t}=m(),e=U(),o=l(e.getPreTaskOptions);return x(()=>e.getPreTaskOptions,a=>{o.value=a}),{type:"select",field:"preTasks",span:24,class:"pre-tasks-model",name:t("project.node.pre_tasks"),props:{multiple:!0,filterable:!0},options:o}}function re(t,e){const{t:o}=m(),a=["CONDITIONS","SWITCH"],r=Object.keys(fe).map(n=>({label:n,value:n,disabled:a.includes(n)}));return{type:"select",field:"taskType",span:24,name:o("project.node.task_type"),props:{disabled:e||["CONDITIONS","SWITCH"].includes(t.taskType)},options:r,validate:{trigger:["input","blur"],required:!0,message:o("project.node.task_type_tips")},value:t.taskType?t.taskType:"SHELL"}}function ae({model:t,projectCode:e,isCreate:o,from:a,processName:r,taskCode:n}){const{t:s}=m(),i=U(),d=l([]),p=l(!1),c=async()=>{if(p.value)return;p.value=!0;const h=await ye(e);d.value=h.map(M=>({label:M.name,value:M.code})),p.value=!1},f=async h=>{if(!h)return;const M=await te(h,e);t.definition=M,i.updateDefinition(M,n)},T=h=>{f(h)};return H(()=>{a===1&&r&&f(r),c()}),{type:"select",field:"processName",span:24,name:s("project.node.workflow_name"),props:{loading:p,disabled:!o,"on-update:value":T},validate:{trigger:["input","blur"],required:!0,validator(h,M){if(!M)return new Error(s("project.node.workflow_name_tips"))}},options:d}}function We({model:t,projectCode:e,from:o,processName:a,code:r}){const{t:n}=m(),s=l([]),i=l(!1),d=async()=>{if(i.value)return;i.value=!0;const c=await ye(e);s.value=c.filter(f=>f.code!==r).map(f=>({label:f.name,value:f.code})),i.value=!1},p=async c=>{if(!c)return;const f=await te(c,e);t.definition=f};return H(()=>{o===1&&a&&p(a),d()}),{type:"select",field:"processDefinitionCode",span:24,name:n("project.node.child_node"),props:{loading:i},options:s,class:"select-child-node",validate:{trigger:["input","blur"],required:!0,validator(c,f){if(!f)return Error(n("project.node.child_node_tips"))}}}}function Be(){const{t}=m();return{type:"input",field:"targetJobName",name:t("project.node.target_task_name"),props:{placeholder:t("project.node.target_task_name_tips"),maxLength:100},validate:{trigger:["input","blur"],required:!0,message:t("project.node.target_task_name_tips")}}}function $(t,e={}){const{t:o}=m(),a=l([]),r=l([]),n=[{id:0,code:"MYSQL",disabled:!1},{id:1,code:"POSTGRESQL",disabled:!1},{id:2,code:"HIVE",disabled:!1},{id:3,code:"SPARK",disabled:!1},{id:4,code:"CLICKHOUSE",disabled:!1},{id:5,code:"ORACLE",disabled:!1},{id:6,code:"SQLSERVER",disabled:!1},{id:7,code:"DB2",disabled:!1},{id:8,code:"PRESTO",disabled:!1},{id:9,code:"REDSHIFT",disabled:!1},{id:10,code:"ATHENA",disabled:!1}],s=async()=>{a.value=n.filter(p=>p.disabled?!1:e.supportedDatasourceType?J.exports.indexOf(e.supportedDatasourceType,p.code)!==-1:!0).map(p=>({label:p.code,value:p.code}))},i=async()=>{const p={type:t[e.typeField||"type"]},c=await _e(p);r.value=c.map(T=>({label:T.name,value:T.id}));const f=e.sourceField||"datasource";!c.length&&t[f]&&(t[f]=null),c.length&&t[f]&&(J.exports.find(c,{id:t[f]})||(t[f]=null))},d=()=>{i()};return H(async()=>{s(),await ue(),i()}),[{type:"select",field:e.typeField||"type",span:e.span||12,name:o("project.node.datasource_type"),props:{"on-update:value":d},options:a,validate:{trigger:["input","blur"],required:!0}},{type:"select",field:e.sourceField||"datasource",span:e.span||12,name:o("project.node.datasource_instances"),options:r,validate:{trigger:["input","blur"],required:!0,validator(p,c){if(!c&&c!==0)return Error(o("project.node.datasource_instances"))}}}]}const W={"field-title":"_field-title_1hhfj_17","relaction-label":"_relaction-label_1hhfj_32","relaction-switch":"_relaction-switch_1hhfj_37","display-rows-tips":"_display-rows-tips_1hhfj_55"};function Je(t){const{t:e}=m(),o=v(()=>t.sqlType==="0"?6:0),a=v(()=>t.sqlType==="1"?18:0),r=v(()=>t.sqlType==="0"&&t.sendEmail?24:0),n=l([]),s=l(!1),i=[{value:"0",label:e("project.node.sql_type_query")},{value:"1",label:e("project.node.sql_type_non_query")}],d=async()=>{if(s.value)return;s.value=!0;const p=await He();n.value=p.map(c=>({label:c.groupName,value:c.id})),s.value=!1};return H(()=>{d()}),[{type:"select",field:"sqlType",span:6,name:e("project.node.sql_type"),options:i,validate:{trigger:["input","blur"],required:!0}},{type:"input",field:"segmentSeparator",name:e("project.node.segment_separator"),props:{placeholder:e("project.node.segment_separator_tips")},span:a},{type:"switch",field:"sendEmail",span:o,name:e("project.node.send_email")},{type:"select",field:"displayRows",span:o,name:e("project.node.log_display"),options:$e,props:{filterable:!0,tag:!0},validate:{trigger:["input","blur"],validator(p,c){if(!/^\+?[1-9][0-9]*$/.test(c))return new Error(e("project.node.integer_tips"))}}},{type:"custom",field:"displayRowsTips",span:o,widget:Y("div",{class:W["display-rows-tips"]},e("project.node.rows_of_result"))},{type:"input",field:"title",name:e("project.node.title"),props:{placeholder:e("project.node.title_tips")},span:r,validate:{trigger:["input","blur"],required:!0,validator(p,c){if(t.sendEmail&&!c)return new Error(e("project.node.title_tips"))}}},{type:"select",field:"groupId",name:e("project.node.alarm_group"),options:n,span:r,props:{loading:s,placeholder:e("project.node.alarm_group_tips")},validate:{trigger:["input","blur"],required:!0,validator(p,c){if(t.sendEmail&&!c)return new Error(e("project.node.alarm_group_tips"))}}}]}const $e=[{label:"1",value:1},{label:"10",value:10},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100}];function Ke(t){const{t:e}=m();return[{type:"editor",field:"method",name:e("project.node.procedure_method"),props:{language:"sql",placeholder:e("project.node.procedure_method_tips")},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.procedure_method_tips")}},...D({model:t,field:"localParams",isSimple:!1})]}function D({model:t,field:e,isSimple:o,name:a="custom_parameters",span:r=24}){const{t:n}=m();return[{type:"custom-parameters",field:e,name:n(`project.node.${a}`),class:"btn-custom-parameters",span:r,children:[{type:"input",field:"prop",span:6,class:"input-param-key",props:{placeholder:n("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(s,i){if(!i)return new Error(n("project.node.prop_tips"));if(t[e].filter(p=>p.prop===i).length>1)return new Error(n("project.node.prop_repeat"))}}},{type:"select",field:"direct",span:4,options:Xe,value:"IN",props:{disabled:o}},{type:"select",field:"type",span:6,options:ze,value:"VARCHAR",props:{disabled:o}},{type:"input",field:"value",span:6,class:"input-param-value",props:{placeholder:n("project.node.value_tips"),maxLength:256}}]}]}const ze=[{value:"VARCHAR",label:"VARCHAR"},{value:"INTEGER",label:"INTEGER"},{value:"LONG",label:"LONG"},{value:"FLOAT",label:"FLOAT"},{value:"DOUBLE",label:"DOUBLE"},{value:"DATE",label:"DATE"},{value:"TIME",label:"TIME"},{value:"TIMESTAMP",label:"TIMESTAMP"},{value:"BOOLEAN",label:"BOOLEAN"},{value:"LIST",label:"LIST"}],Xe=[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}];function ve(t,e,o,a){const{t:r}=m(),n=l([]),s=l(!1),i=async d=>{if(s.value)return;s.value=!0;const p=await _e({type:d});n.value=p.map(c=>({label:c.name,value:c.id})),s.value=!1};return H(()=>{i("MYSQL")}),[{type:"select",field:o,name:r("project.node.datasource"),span:e,options:[{label:"MYSQL",value:"MYSQL"}],validate:{required:!0}},{type:"select",field:a,name:" ",span:e,props:{placeholder:r("project.node.datasource_tips"),filterable:!0,loading:s},options:n,validate:{trigger:["blur","input"],validator(d,p){if(!p)return new Error(r("project.node.datasource_tips"))}}}]}function Ze(t,e){const{t:o}=m(),a=l(24),r=l(0),n=l(24),s=l(0),i=l(0),d=l(0),p=l(12),c=()=>{a.value=e.value&&t.sourceType==="MYSQL"?24:0,r.value=a.value&&t.srcQueryType==="0"?24:0,n.value=a.value&&t.srcQueryType==="1"?24:0,s.value=r.value&&t.srcColumnType==="1"?24:0,i.value=e.value&&t.sourceType==="HIVE"?24:0,d.value=e.value&&t.sourceType==="HDFS"?24:0,p.value=e.value&&t.sourceType==="MYSQL"?12:0},f=l([{label:"MYSQL",value:"MYSQL"}]),T=h=>{switch(h){case"import":return[{label:"MYSQL",value:"MYSQL"}];case"export":return[{label:"HDFS",value:"HDFS"},{label:"HIVE",value:"HIVE"}];default:return[{label:"MYSQL",value:"MYSQL"},{label:"HDFS",value:"HDFS"},{label:"HIVE",value:"HIVE"}]}};return x(()=>t.modelType,h=>{f.value=T(h),t.sourceType||(t.sourceType=f.value[0].value)}),x(()=>[e.value,t.sourceType,t.srcQueryType,t.srcColumnType],()=>{c()}),[{type:"custom",field:"custom-title-source",span:e,widget:Y("div",{class:W["field-title"]},o("project.node.data_source"))},{type:"select",field:"sourceType",name:o("project.node.type"),span:e,options:f},...ve(t,p,"sourceMysqlType","sourceMysqlDatasource"),{type:"radio",field:"srcQueryType",name:o("project.node.model_type"),span:a,options:[{label:o("project.node.form"),value:"0"},{label:"SQL",value:"1"}],props:{"on-update:value":h=>{t.targetType=h==="0"?"HIVE":"HDFS"}}},{type:"input",field:"srcTable",name:o("project.node.table"),span:r,props:{placeholder:o("project.node.table_tips")},validate:{trigger:["input","blur"],required:!0,validator(h,M){if(r.value&&!M)return new Error(o("project.node.table_tips"))}}},{type:"radio",field:"srcColumnType",name:o("project.node.column_type"),span:r,options:[{label:o("project.node.all_columns"),value:"0"},{label:o("project.node.some_columns"),value:"1"}]},{type:"input",field:"srcColumns",name:o("project.node.column"),span:s,props:{placeholder:o("project.node.column_tips")},validate:{trigger:["input","blur"],required:!0,validator(h,M){if(!!s.value&&!M)return new Error(o("project.node.column_tips"))}}},{type:"input",field:"sourceHiveDatabase",name:o("project.node.database"),span:i,props:{placeholder:o("project.node.database_tips")},validate:{trigger:["blur","input"],required:!0,validator(h,M){if(i.value&&!M)return new Error(o("project.node.database_tips"))}}},{type:"input",field:"sourceHiveTable",name:o("project.node.table"),span:i,props:{placeholder:o("project.node.hive_table_tips")},validate:{trigger:["blur","input"],required:!0,validator(h,M){if(i.value&&!M)return new Error(o("project.node.hive_table_tips"))}}},{type:"input",field:"sourceHivePartitionKey",name:o("project.node.hive_partition_keys"),span:i,props:{placeholder:o("project.node.hive_partition_keys_tips")}},{type:"input",field:"sourceHivePartitionValue",name:o("project.node.hive_partition_values"),span:i,props:{placeholder:o("project.node.hive_partition_values_tips")}},{type:"input",field:"sourceHdfsExportDir",name:o("project.node.export_dir"),span:d,props:{placeholder:o("project.node.export_dir_tips")},validate:{trigger:["blur","input"],required:!0,validator(h,M){if(d.value&&!M)return new Error(o("project.node.export_dir_tips"))}}},{type:"editor",field:"sourceMysqlSrcQuerySql",name:o("project.node.sql_statement"),span:n,validate:{trigger:["blur","input"],required:!0,validator(h,M){if(n.value&&!M)return new Error(o("project.node.sql_statement_tips"))}}},...D({model:t,field:"mapColumnHive",name:"map_column_hive",isSimple:!0,span:a}),...D({model:t,field:"mapColumnJava",name:"map_column_java",isSimple:!0,span:a})]}function et(t,e){const{t:o}=m(),a=l(0),r=l(24),n=l(0),s=l(0),i=l(0),d=()=>{a.value=e.value&&t.targetType==="HIVE"?24:0,r.value=e.value&&t.targetType==="HDFS"?24:0,n.value=e.value&&t.targetType==="MYSQL"?24:0,s.value=e.value&&t.targetType==="MYSQL"?12:0,i.value=n.value&&t.targetMysqlIsUpdate?24:0},p=l([{label:"HIVE",value:"HIVE"},{label:"HDFS",value:"HDFS"}]),c=(f,T)=>{switch(f){case"MYSQL":return T==="1"?[{label:"HDFS",value:"HDFS"}]:[{label:"HIVE",value:"HIVE"},{label:"HDFS",value:"HDFS"}];case"HDFS":case"HIVE":return[{label:"MYSQL",value:"MYSQL"}];default:return[{label:"HIVE",value:"HIVE"},{label:"HDFS",value:"HDFS"}]}};return x(()=>[t.sourceType,t.srcQueryType],([f,T])=>{p.value=c(f,T),t.targetType||(t.targetType=p.value[0].value)}),x(()=>[e.value,t.targetType,t.targetMysqlIsUpdate],()=>{d()}),[{type:"custom",field:"custom-title-target",span:e,widget:Y("div",{class:W["field-title"]},o("project.node.data_target"))},{type:"select",field:"targetType",name:o("project.node.type"),span:e,options:p},{type:"input",field:"targetHiveDatabase",name:o("project.node.database"),span:a,props:{placeholder:o("project.node.database_tips")},validate:{trigger:["blur","input"],required:!0,validator(f,T){if(a.value&&!T)return new Error(o("project.node.database_tips"))}}},{type:"input",field:"targetHiveTable",name:o("project.node.table"),span:a,props:{placeholder:o("project.node.table")},validate:{trigger:["blur","input"],required:!0,validator(f,T){if(a.value&&!T)return new Error(o("project.node.hive_table_tips"))}}},{type:"switch",field:"targetHiveCreateTable",span:a,name:o("project.node.create_hive_table")},{type:"switch",field:"targetHiveDropDelimiter",span:a,name:o("project.node.drop_delimiter")},{type:"switch",field:"targetHiveOverWrite",span:a,name:o("project.node.over_write_src")},{type:"input",field:"targetHiveTargetDir",name:o("project.node.hive_target_dir"),span:a,props:{placeholder:o("project.node.hive_target_dir_tips")}},{type:"input",field:"targetHiveReplaceDelimiter",name:o("project.node.replace_delimiter"),span:a,props:{placeholder:o("project.node.replace_delimiter_tips")}},{type:"input",field:"targetHivePartitionKey",name:o("project.node.hive_partition_keys"),span:a,props:{placeholder:o("project.node.hive_partition_keys_tips")}},{type:"input",field:"targetHivePartitionValue",name:o("project.node.hive_partition_values"),span:a,props:{placeholder:o("project.node.hive_partition_values_tips")}},{type:"input",field:"targetHdfsTargetPath",name:o("project.node.target_dir"),span:r,props:{placeholder:o("project.node.target_dir_tips")},validate:{trigger:["blur","input"],required:!0,validator(f,T){if(r.value&&!T)return new Error(o("project.node.target_dir_tips"))}}},{type:"switch",field:"targetHdfsDeleteTargetDir",name:o("project.node.delete_target_dir"),span:r},{type:"radio",field:"targetHdfsCompressionCodec",name:o("project.node.compression_codec"),span:r,options:tt},{type:"radio",field:"targetHdfsFileType",name:o("project.node.file_type"),span:r,options:rt},{type:"input",field:"targetHdfsFieldsTerminated",name:o("project.node.fields_terminated"),span:r,props:{placeholder:o("project.node.fields_terminated_tips")}},{type:"input",field:"targetHdfsLinesTerminated",name:o("project.node.lines_terminated"),span:r,props:{placeholder:o("project.node.lines_terminated_tips")}},...ve(t,s,"targetMysqlType","targetMysqlDatasource"),{type:"input",field:"targetMysqlTable",name:o("project.node.table"),span:n,props:{placeholder:o("project.node.hive_table_tips")},validate:{trigger:["blur","input"],required:!0,validator(f,T){if(n.value&&!T)return new Error(o("project.node.table_tips"))}}},{type:"input",field:"targetMysqlColumns",name:o("project.node.column"),span:n,props:{placeholder:o("project.node.column_tips")}},{type:"input",field:"targetMysqlFieldsTerminated",name:o("project.node.fields_terminated"),span:n,props:{placeholder:o("project.node.fields_terminated_tips")}},{type:"input",field:"targetMysqlLinesTerminated",name:o("project.node.lines_terminated"),span:n,props:{placeholder:o("project.node.lines_terminated_tips")}},{type:"switch",field:"targetMysqlIsUpdate",span:n,name:o("project.node.is_update")},{type:"input",field:"targetMysqlTargetUpdateKey",name:o("project.node.update_key"),span:i,props:{placeholder:o("project.node.update_key_tips")}},{type:"radio",field:"targetMysqlUpdateMode",name:o("project.node.update_mode"),span:i,options:[{label:o("project.node.only_update"),value:"updateonly"},{label:o("project.node.allow_insert"),value:"allowinsert"}]}]}const tt=[{label:"snappy",value:"snappy"},{label:"lzo",value:"lzo"},{label:"gzip",value:"gzip"},{label:"no",value:""}],rt=[{label:"avro",value:"--as-avrodatafile"},{label:"sequence",value:"--as-sequencefile"},{label:"text",value:"--as-textfile"},{label:"parquet",value:"--as-parquetfile"}];function ge({model:t,children:e,childrenField:o,name:a}){const{t:r}=m(),n=v(()=>t.dependTaskList.length?3:0);return ee(()=>{t.dependTaskList.forEach((s,i)=>{s[o].length===0&&t.dependTaskList.splice(i,1)})}),[{type:"custom",name:r(`project.node.${a}`),field:"relationLabel",span:24,class:W["relaction-label"]},{type:"switch",field:"relation",props:{round:!1,"checked-value":"AND","unchecked-value":"OR",size:"small"},slots:{checked:()=>r("project.node.and"),unchecked:()=>r("project.node.or")},span:n,class:W["relaction-switch"]},{type:"custom-parameters",field:"dependTaskList",span:20,children:[{type:"switch",field:"relation",props:{round:!1,"checked-value":"AND","unchecked-value":"OR",size:"small"},slots:{checked:()=>r("project.node.and"),unchecked:()=>r("project.node.or")},span:4,value:"AND",class:W["relaction-switch"]},e]}]}function at(t){const{t:e}=m(),o=v(()=>t.timeoutShowFlag?24:0),a=v(()=>t.timeoutFlag&&t.timeoutShowFlag?12:0),r=[{label:e("project.node.timeout_alarm"),value:"WARN"},{label:e("project.node.timeout_failure"),value:"FAILED"}];return x(()=>t.timeoutFlag,n=>{t.timeoutShowFlag=n}),[{type:"switch",field:"timeoutShowFlag",name:e("project.node.timeout_alarm")},{type:"switch",field:"timeoutFlag",name:e("project.node.waiting_dependent_complete"),props:{"on-update:value":n=>{n&&(t.timeoutNotifyStrategy.length||(t.timeoutNotifyStrategy=["WARN"]),t.timeout||(t.timeout=30))}},span:o},{type:"input-number",field:"timeout",name:e("project.node.timeout_period"),span:a,props:{max:Math.pow(9,10)-1},slots:{suffix:()=>e("project.node.minute")},validate:{trigger:["input"],validator(n,s){if(t.timeoutFlag&&!/^[1-9]\d*$/.test(String(s)))return new Error(e("project.node.timeout_period_tips"))}}},{type:"checkbox",field:"timeoutNotifyStrategy",name:e("project.node.timeout_strategy"),options:r,span:a,validate:{trigger:["input"],validator(n,s){if(t.waitCompleteTimeoutEnable&&!s.length)return new Error(e("project.node.timeout_strategy_tips"))}}}]}function ot(t,e){const{t:o}=m(),a=l([]),r=l(!1),n=l([]),s=l([]),i=l([]),d=l([]),p=l([]),c=l([]),f=l([]),T=v(()=>t.comparison_type===1?24:0);let h=0;const M=async()=>{if(r.value)return;r.value=!0;const y=await Ue();a.value=y.map(u=>{let _="";return u.name&&(_=u.name.replace("$t(","").replace(")","")),{value:u.id,label:_?o(`project.node.${_}`):""}}),r.value=!1},B=async y=>{if(r.value)return;r.value=!0;const u=await Qe(y),_=JSON.parse(u).map(j=>b(j));e(_,h),h=_.length,r.value=!1},b=y=>{var j;const u={field:y.field,options:y.options,validate:y.validate,props:y.props,value:y.value},_=(j=y.name)==null?void 0:j.replace("$t(","").replace(")","");return u.name=_?o(`project.node.${_}`):"",y.type!=="group"?u.type=y.type:(u.type="custom-parameters",u.children=u.props.rules.map(F=>(F.span=Math.floor(22/u.props.rules.length),F)),t[u.field]=t[u.field]||[],delete u.props.rules),y.emit&&y.emit.forEach(F=>{F==="change"&&(u.props.onUpdateValue=V=>{g(V,u.field,!0)})}),y.props.placeholder&&(u.props.placeholder=o("project.node."+y.props.placeholder.split(" ").join("_").split(",").join("").toLowerCase())),u.field==="src_datasource_id"&&(u.options=n),u.field==="target_datasource_id"&&(u.options=d),u.field==="writer_datasource_id"&&(u.options=f),u.field==="src_table"&&(u.options=s),u.field==="target_table"&&(u.options=p),u.field==="src_field"&&(u.options=i),u.field==="target_field"&&(u.options=c),t[u.field]!==void 0&&(g(t[u.field],u.field,!1),u.value=t[u.field]),u},g=async(y,u,_)=>{if(u==="src_connector_type"&&typeof y=="number"){const j=await X(y);n.value=j||[],_&&(s.value=[],t.src_datasource_id=null,t.src_table=null,t.src_field=null);return}if(u==="target_connector_type"&&typeof y=="number"){const j=await X(y);d.value=j||[],_&&(p.value=[],t.target_datasource_id=null,t.target_table=null,t.target_field=null);return}if(u==="writer_connector_type"&&typeof y=="number"){const j=await X(y);f.value=j||[],_&&(t.writer_datasource_id=null);return}if(u==="src_datasource_id"&&typeof y=="number"){const j=await ie(y);s.value=j||[],_&&(t.src_table=null,t.src_field=null)}if(u==="target_datasource_id"&&typeof y=="number"){const j=await ie(y);p.value=j||[],_&&(t.target_table=null,t.target_field=null)}if(u==="src_table"&&typeof y=="string"){const j=await le(t.src_datasource_id,y);i.value=j||[],_&&(t.src_field=null)}if(u==="target_table"&&typeof y=="string"){const j=await le(t.target_datasource_id,y);c.value=j||[],_&&(t.target_field=null)}};return H(async()=>{await M(),await B(t.ruleId)}),[{type:"select",field:"ruleId",name:o("project.node.rule_name"),props:{loading:r,onUpdateValue:B},options:a},{type:"input",field:"comparison_name",name:o("project.node.fix_value"),props:{placeholder:o("project.node.fix_value")},span:T}]}function oe(t=24,e=l(!0),o=l(!0),a=l(!0)){const{t:r}=m(),n=l(pe);return ee(()=>{n.value=pe.filter(s=>{switch(s.value){case"cluster":return o.value;case"client":return e.value;case"local":return a.value;default:return!0}})}),{type:"radio",field:"deployMode",name:r("project.node.deploy_mode"),options:n,span:t}}const pe=[{label:"cluster",value:"cluster"},{label:"client",value:"client"},{label:"local",value:"local"}];function je(){const{t}=m();return{type:"input-number",field:"driverCores",name:t("project.node.driver_cores"),span:12,props:{placeholder:t("project.node.driver_cores_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.driver_cores_tips"))}}}}function Te(){const{t}=m();return{type:"input",field:"driverMemory",name:t("project.node.driver_memory"),span:12,props:{placeholder:t("project.node.driver_memory_tips")},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.driver_memory_tips"));if(!Number.isInteger(parseInt(o)))return new Error(t("project.node.driver_memory")+t("project.node.positive_integer_tips"))}}}}function be(){const{t}=m();return{type:"input-number",field:"numExecutors",name:t("project.node.executor_number"),span:12,props:{placeholder:t("project.node.executor_number_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.executor_number_tips"))}}}}function he(){const{t}=m();return{type:"input",field:"executorMemory",name:t("project.node.executor_memory"),span:12,props:{placeholder:t("project.node.executor_memory_tips")},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.executor_memory_tips"));if(!Number.isInteger(parseInt(o)))return new Error(t("project.node.executor_memory_tips")+t("project.node.positive_integer_tips"))}}}}function Se(){const{t}=m();return{type:"input-number",field:"executorCores",name:t("project.node.executor_cores"),span:12,props:{placeholder:t("project.node.executor_cores_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.executor_cores_tips"))}}}}function ne(t){const{t:e}=m(),o=l([]),a=U(),r=v(()=>t.programType==="SQL"?0:24),n=async s=>{const i=a.getMainJar(s);if(i){o.value=i;return}const d=await De({type:"FILE",programType:s});ce.removeUselessChildren(d),o.value=d||[],a.updateMainJar(s,d)};return H(()=>{n(t.programType)}),x(()=>t.programType,s=>{s!=="SQL"&&n(s)}),{type:"tree-select",field:"mainJar",name:e("project.node.main_package"),span:r,props:{cascade:!0,showPath:!0,checkStrategy:"child",placeholder:e("project.node.main_package_tips"),keyField:"id",labelField:"fullName"},validate:{trigger:["input","blur"],required:t.programType!=="SQL",validator(s,i){if(!i&&t.programType!=="SQL")return new Error(e("project.node.main_package_tips"))}},options:o}}function G(t=24,e=!1,o=-1){const{t:a}=m(),r=l([]),n=l(!1),s=U(),i=async()=>{if(s.resources.length){r.value=s.resources;return}if(n.value)return;n.value=!0;const d=await xe({type:"FILE"});ce.removeUselessChildren(d),r.value=d||[],n.value=!1,s.updateResource(d)};return H(()=>{i()}),{type:"tree-select",field:"resourceList",name:a("project.node.resources"),span:t,options:r,props:{multiple:!0,checkable:!0,cascade:!0,showPath:!0,checkStrategy:"child",placeholder:a("project.node.resources_tips"),keyField:"id",labelField:"name",loading:n},validate:{trigger:["input","blur"],required:e,validator(d,p){if(e){if(!p)return new Error(a("project.node.resources_tips"));if(o>0&&p.length>o)return new Error(a("project.node.resources_limit_tips")+o)}}}}}const q=({projectCode:t,from:e=0,readonly:o,data:a,model:r})=>e===0?[]:[re(r,o),ae({model:r,projectCode:t,isCreate:!(a!=null&&a.id),from:e,processName:a==null?void 0:a.processName,taskCode:a==null?void 0:a.code})];function ke(t){const{t:e}=m();return[{type:"editor",field:"rawScript",name:e("project.node.script"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.script_tips")}},G(),...D({model:t,field:"localParams",isSimple:!1})]}function nt(t){const{t:e}=m(),o=v(()=>t.programType==="PYTHON"||t.programType==="SQL"?0:24),a=v(()=>t.programType==="SQL"?0:24),r=v(()=>t.programType==="SQL"?24:0),n=v(()=>t.programType!=="SQL");return[{type:"select",field:"programType",span:12,name:e("project.node.program_type"),options:st,props:{"on-update:value":()=>{t.mainJar=null,t.mainClass=""}}},{type:"select",field:"sparkVersion",span:12,name:e("project.node.spark_version"),options:it},{type:"input",field:"mainClass",span:o,name:e("project.node.main_class"),props:{placeholder:e("project.node.main_class_tips")},validate:{trigger:["input","blur"],required:t.programType!=="PYTHON"&&t.programType!=="SQL",validator(s,i){if(t.programType!=="PYTHON"&&!i&&t.programType!=="SQL")return new Error(e("project.node.main_class_tips"))}}},ne(t),{type:"editor",field:"rawScript",span:r,name:e("project.node.script"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.script_tips")}},oe(24,l(!0),n),{type:"input",field:"appName",name:e("project.node.app_name"),props:{placeholder:e("project.node.app_name_tips")}},je(),Te(),be(),he(),Se(),{type:"input",field:"mainArgs",span:a,name:e("project.node.main_arguments"),props:{type:"textarea",placeholder:e("project.node.main_arguments_tips")}},{type:"input",field:"others",name:e("project.node.option_parameters"),props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}},G(),...D({model:t,field:"localParams",isSimple:!1})]}const st=[{label:"JAVA",value:"JAVA"},{label:"SCALA",value:"SCALA"},{label:"PYTHON",value:"PYTHON"},{label:"SQL",value:"SQL"}],it=[{label:"SPARK2",value:"SPARK2"},{label:"SPARK1",value:"SPARK1"}];function lt(t){const{t:e}=m(),o=v(()=>t.programType==="PYTHON"||t.programType==="SQL"?0:24);return[{type:"select",field:"programType",span:12,name:e("project.node.program_type"),options:pt,props:{"on-update:value":()=>{t.mainJar=null,t.mainClass=""}},value:t.programType},{type:"input",field:"mainClass",span:o,name:e("project.node.main_class"),props:{placeholder:e("project.node.main_class_tips")},validate:{trigger:["input","blur"],required:t.programType!=="PYTHON",validator(a,r){if(t.programType!=="PYTHON"&&!r)return new Error(e("project.node.main_class_tips"))}}},ne(t),{type:"input",field:"appName",name:e("project.node.app_name"),props:{placeholder:e("project.node.app_name_tips")}},{type:"input",field:"mainArgs",name:e("project.node.main_arguments"),props:{type:"textarea",placeholder:e("project.node.main_arguments_tips")}},{type:"input",field:"others",name:e("project.node.option_parameters"),props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}},G(),...D({model:t,field:"localParams",isSimple:!0})]}const pt=[{label:"JAVA",value:"JAVA"},{label:"SCALA",value:"SCALA"},{label:"PYTHON",value:"PYTHON"}];function we(t){const{t:e}=m(),o=v(()=>t.programType==="PYTHON"||t.programType==="SQL"?0:24),a=v(()=>t.programType==="SQL"?0:24),r=v(()=>t.programType==="SQL"?24:0),n=v(()=>t.programType==="SQL"?[{label:">=1.13",value:">=1.13"}]:ct),s=v(()=>t.flinkVersion==="<1.10"&&t.deployMode!=="local"?12:0),i=v(()=>t.deployMode!=="local"?12:0),d=v(()=>t.deployMode!=="local"?24:0),p=v(()=>t.programType==="SQL"?[{label:"per-job/cluster",value:"cluster"},{label:"local",value:"local"}]:t.flinkVersion==="<1.10"?[{label:"cluster",value:"cluster"},{label:"local",value:"local"}]:[{label:"per-job/cluster",value:"cluster"},{label:"application",value:"application"},{label:"local",value:"local"}]);return x(()=>t.flinkVersion,()=>{t.flinkVersion==="<1.10"&&t.deployMode==="application"&&(t.deployMode="cluster")}),ee(()=>{t.flinkVersion=t.programType==="SQL"?">=1.13":t.flinkVersion}),[{type:"select",field:"programType",span:24,name:e("project.node.program_type"),options:ut,props:{"on-update:value":()=>{t.mainJar=null,t.mainClass=""}}},{type:"input",field:"mainClass",span:o,name:e("project.node.main_class"),props:{placeholder:e("project.node.main_class_tips")},validate:{trigger:["input","blur"],required:t.programType!=="PYTHON"&&t.programType!=="SQL",validator(c,f){if(t.programType!=="PYTHON"&&!f&&t.programType!=="SQL")return new Error(e("project.node.main_class_tips"))}}},ne(t),{type:"radio",field:"deployMode",name:e("project.node.deploy_mode"),options:p,span:24},{type:"editor",field:"initScript",span:r,name:e("project.node.init_script"),validate:{trigger:["input","trigger"],required:!1,message:e("project.node.init_script_tips")}},{type:"editor",field:"rawScript",span:r,name:e("project.node.script"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.script_tips")}},{type:"select",field:"flinkVersion",name:e("project.node.flink_version"),options:n,value:t.flinkVersion,span:i},{type:"input",field:"appName",name:e("project.node.app_name"),props:{placeholder:e("project.node.app_name_tips")},span:d},{type:"input",field:"jobManagerMemory",name:e("project.node.job_manager_memory"),span:i,props:{placeholder:e("project.node.job_manager_memory_tips"),min:1},validate:{trigger:["input","blur"],validator(c,f){if(!!f&&!Number.isInteger(parseInt(f)))return new Error(e("project.node.job_manager_memory_tips")+e("project.node.positive_integer_tips"))}}},{type:"input",field:"taskManagerMemory",name:e("project.node.task_manager_memory"),span:i,props:{placeholder:e("project.node.task_manager_memory_tips")},validate:{trigger:["input","blur"],validator(c,f){if(!!f&&!Number.isInteger(parseInt(f)))return new Error(e("project.node.task_manager_memory")+e("project.node.positive_integer_tips"))}},value:t.taskManagerMemory},{type:"input-number",field:"slot",name:e("project.node.slot_number"),span:i,props:{placeholder:e("project.node.slot_number_tips"),min:1},value:t.slot},{type:"input-number",field:"taskManager",name:e("project.node.task_manager_number"),span:s,props:{placeholder:e("project.node.task_manager_number_tips"),min:1},value:t.taskManager},{type:"input-number",field:"parallelism",name:e("project.node.parallelism"),span:12,props:{placeholder:e("project.node.parallelism_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(c,f){if(!f)return new Error(e("project.node.parallelism_tips"))}},value:t.parallelism},{type:"input",field:"mainArgs",span:a,name:e("project.node.main_arguments"),props:{type:"textarea",placeholder:e("project.node.main_arguments_tips")}},{type:"input",field:"others",name:e("project.node.option_parameters"),props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}},G(),...D({model:t,field:"localParams",isSimple:!0})]}const ut=[{label:"JAVA",value:"JAVA"},{label:"SCALA",value:"SCALA"},{label:"PYTHON",value:"PYTHON"},{label:"SQL",value:"SQL"}],ct=[{label:"<1.10",value:"<1.10"},{label:"1.11",value:"1.11"},{label:">=1.12",value:">=1.12"}];function dt(t){const{t:e}=m(),o=[{label:e("project.node.status_code_default"),value:"STATUS_CODE_DEFAULT"},{label:e("project.node.status_code_custom"),value:"STATUS_CODE_CUSTOM"},{label:e("project.node.body_contains"),value:"BODY_CONTAINS"},{label:e("project.node.body_not_contains"),value:"BODY_NOT_CONTAINS"}];return[{type:"input",field:"url",name:e("project.node.http_url"),props:{placeholder:e("project.node.http_url_tips")},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.http_url_tips"));if(r.search(new RegExp(/http[s]{0,1}:\/\/\S*/,"i")))return new Error(e("project.node.http_url_validator"))}}},{type:"select",field:"httpMethod",span:12,name:e("project.node.http_method"),options:mt},{type:"custom-parameters",field:"httpParams",name:e("project.node.http_parameters"),children:[{type:"input",field:"prop",span:6,props:{placeholder:e("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.prop_tips"));if(t.httpParams.filter(s=>s.prop===r).length>1)return new Error(e("project.node.prop_repeat"))}}},{type:"select",field:"httpParametersType",span:6,options:ft,value:"PARAMETER"},{type:"input",field:"value",span:6,props:{placeholder:e("project.node.value_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.value_required_tips"))}}}]},{type:"select",field:"httpCheckCondition",name:e("project.node.http_check_condition"),options:o},{type:"input",field:"condition",name:e("project.node.http_condition"),props:{type:"textarea",placeholder:e("project.node.http_condition_tips")}},{type:"input-number",field:"connectTimeout",name:e("project.node.connect_timeout"),span:12,props:{max:Math.pow(7,10)-1},slots:{suffix:()=>e("project.node.ms")},validate:{trigger:["input","blur"],validator(a,r){if(!Number.isInteger(parseInt(r)))return new Error(e("project.node.connect_timeout")+e("project.node.positive_integer_tips"))}}},{type:"input-number",field:"socketTimeout",name:e("project.node.socket_timeout"),span:12,props:{max:Math.pow(7,10)-1},slots:{suffix:()=>e("project.node.ms")},validate:{trigger:["input","blur"],validator(a,r){if(!Number.isInteger(parseInt(r)))return new Error(e("project.node.socket_timeout")+e("project.node.positive_integer_tips"))}}},...D({model:t,field:"localParams",isSimple:!0})]}const mt=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"HEAD",label:"HEAD"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],ft=[{value:"PARAMETER",label:"Parameter"},{value:"BODY",label:"Body"},{value:"HEADERS",label:"Headers"}];function yt(t){const{t:e}=m(),o=l([]),a=l(!1),r=v(()=>["HIVE","SPARK"].includes(t.type)?24:0),n=async()=>{if(a.value)return;a.value=!0;const s=await Fe({type:t.type});o.value=s.map(i=>({value:String(i.id),label:i.funcName})),a.value=!1};return x(()=>t.type,s=>{["HIVE","SPARK"].includes(s)&&n()}),{type:"select",field:"udfs",options:o,name:e("project.node.udf_function"),props:{multiple:!0,loading:a},span:r}}function _t(t){const{t:e}=m(),o=v(()=>t.type==="HIVE"?24:0);return[{type:"input",field:"connParams",name:e("project.node.sql_parameter"),props:{placeholder:e("project.node.format_tips")+" key1=value1;key2=value2..."},span:o},{type:"editor",field:"sql",name:e("project.node.sql_statement"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")},props:{language:"sql"}},yt(t),...D({model:t,field:"localParams",isSimple:!1}),{type:"multi-input",field:"preStatements",name:e("project.node.pre_sql_statement"),span:22,props:{placeholder:e("project.node.sql_input_placeholder"),type:"textarea",autosize:{minRows:1}}},{type:"multi-input",field:"postStatements",name:e("project.node.post_sql_statement"),span:22,props:{placeholder:e("project.node.sql_input_placeholder"),type:"textarea",autosize:{minRows:1}}}]}function vt(t){const{t:e}=m(),o=v(()=>t.isCustomTask?24:0),a=v(()=>t.isCustomTask?0:24),r=v(()=>t.isCustomTask?0:12);return[{type:"switch",field:"isCustomTask",name:e("project.node.custom_job")},{type:"input",field:"jobName",name:e("project.node.sqoop_job_name"),span:a,props:{placeholder:e("project.node.sqoop_job_name_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,s){if(!t.isCustomTask&&!s)return new Error(e("project.node.sqoop_job_name_tips"))}}},{type:"select",field:"modelType",name:e("project.node.direct"),span:a,options:gt},...D({model:t,field:"hadoopCustomParams",name:"hadoop_custom_params",isSimple:!0,span:a}),...D({model:t,field:"sqoopAdvancedParams",name:"sqoop_advanced_parameters",isSimple:!0,span:a}),...Ze(t,a),...et(t,a),{type:"input-number",field:"concurrency",name:e("project.node.concurrency"),span:r,props:{placeholder:e("project.node.concurrency_tips"),min:1}},{type:"input",field:"splitBy",name:e("project.node.concurrency_column"),span:r,props:{placeholder:e("project.node.concurrency_column_tips")}},{type:"editor",field:"customShell",name:e("project.node.custom_script"),span:o,validate:{trigger:["input","trigger"],required:!0,validator(n,s){if(o.value&&!s)return new Error(e("project.node.custom_script"))}}},...D({model:t,field:"localParams",name:"custom_parameters",isSimple:!0})]}const gt=[{label:"import",value:"import"},{label:"export",value:"export"}];function jt(t){const{t:e}=m(),o=v(()=>t.useCustom?24:0),a=v(()=>t.useCustom?0:24),r=v(()=>t.startupScript.includes("flink")?24:0),n=v(()=>t.startupScript.includes("spark")||t.startupScript==="seatunnel.sh"?24:0),s=v(()=>t.startupScript.includes("spark")&&t.deployMode!=="local"?12:0),i=v(()=>t.startupScript.includes("spark")&&t.deployMode!=="local"&&(t.master==="SPARK"||t.master==="MESOS")?12:0),d=v(()=>t.startupScript.includes("spark")),p=v(()=>t.startupScript==="seatunnel.sh"),c=v(()=>t.startupScript.includes("flink")||t.startupScript==="seatunnel.sh"?24:0);return[{type:"select",field:"startupScript",span:15,name:e("project.node.startup_script"),options:Tt,validate:{trigger:["input","blur"],required:!0,message:e("project.node.startup_script_tips")},props:{"on-update:value":f=>{f&&(t.startupScript==="seatunnel.sh"&&(t.deployMode="local"),t.startupScript.includes("spark")&&(t.deployMode="client"))}}},{type:"select",field:"runMode",name:e("project.node.run_mode"),options:bt,value:t.runMode,span:r},{type:"input",field:"others",name:e("project.node.option_parameters"),span:c,props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}},oe(n,d,l(!0),p),{type:"select",field:"master",name:e("project.node.sea_tunnel_master"),options:ht,value:t.master,span:s},{type:"input",field:"masterUrl",name:e("project.node.sea_tunnel_master_url"),value:t.masterUrl,span:i,props:{placeholder:e("project.node.sea_tunnel_master_url_tips")},validate:{trigger:["input","blur"],required:i.value!==0,validator(f,T){if(i.value!==0&&!T)return new Error(e("project.node.sea_tunnel_master_url_tips"))}}},{type:"switch",field:"useCustom",name:e("project.node.custom_config")},{type:"editor",field:"rawScript",name:e("project.node.script"),span:o,validate:{trigger:["input","trigger"],required:t.useCustom,validator(f,T){if(t.useCustom&&!T)return new Error(e("project.node.script_tips"))}}},G(a,!0,1),...D({model:t,field:"localParams",isSimple:!0})]}const Tt=[{label:"seatunnel.sh",value:"seatunnel.sh"},{label:"start-seatunnel-flink-13-connector-v2.sh",value:"start-seatunnel-flink-13-connector-v2.sh"},{label:"start-seatunnel-flink-15-connector-v2.sh",value:"start-seatunnel-flink-15-connector-v2.sh"},{label:"start-seatunnel-flink-connector-v2.sh",value:"start-seatunnel-flink-connector-v2.sh"},{label:"start-seatunnel-flink.sh",value:"start-seatunnel-flink.sh"},{label:"start-seatunnel-spark-2-connector-v2.sh",value:"start-seatunnel-spark-2-connector-v2.sh"},{label:"start-seatunnel-spark-3-connector-v2.sh",value:"start-seatunnel-spark-3-connector-v2.sh"},{label:"start-seatunnel-spark-connector-v2.sh",value:"start-seatunnel-spark-connector-v2.sh"},{label:"start-seatunnel-spark.sh",value:"start-seatunnel-spark.sh"}],bt=[{label:"run",value:"RUN"},{label:"run-application",value:"RUN_APPLICATION"}],ht=[{label:"yarn",value:"YARN"},{label:"local",value:"LOCAL"},{label:"spark://",value:"SPARK"},{label:"mesos://",value:"MESOS"}];function St(t,e){const{t:o}=m(),a=U(),r=l(a.postTaskOptions),n=l(!1),s=async()=>{if(n.value)return;n.value=!0,r.value=[];const d=await te(t.processName,e);d==null||d.taskDefinitionList.forEach(p=>{p.code!=t.code&&r.value.push({label:p.name,value:p.code})}),n.value=!1,i(r.value)},i=d=>{var p,c;if(!d||!d.length){t.nextNode=null,(p=t.dependTaskList)==null||p.forEach(f=>{f.nextNode=null});return}J.exports.findIndex(r.value,f=>f.value==t.nextNode)===-1&&(t.nextNode=null),(c=t.dependTaskList)==null||c.forEach(f=>{J.exports.findIndex(r.value,T=>T.value==f.nextNode)===-1&&(f.nextNode=null)})};return x(()=>[t.processName,t.nextCode],()=>{t.processName&&s()}),H(async()=>{await ue(),i(r.value)}),[{type:"custom-parameters",field:"dependTaskList",name:o("project.node.switch_condition"),children:[{type:"input",field:"condition",span:24,props:{loading:n,type:"textarea",autosize:{minRows:2}}},{type:"select",field:"nextNode",span:22,name:o("project.node.switch_branch_flow"),options:r}]},{type:"select",field:"nextNode",span:24,name:o("project.node.switch_branch_flow"),props:{loading:n},options:r}]}function kt(t){const{t:e}=m(),o=[{label:`0(${e("project.node.unlimited")})`,value:0},{label:"1KB",value:1024},{label:"10KB",value:10240},{label:"50KB",value:51200},{label:"100KB",value:102400},{label:"512KB",value:524288}],a=[{label:`0(${e("project.node.unlimited")})`,value:0},{label:"500",value:500},{label:"1000",value:1e3},{label:"1500",value:1500},{label:"2000",value:2e3},{label:"2500",value:2500},{label:"3000",value:3e3}],r=[{label:"1G",value:1},{label:"2G",value:2},{label:"3G",value:3},{label:"4G",value:4}],n=l(24),s=l(0),i=l(12),d=l(8),p=l(22),c=l(12),f=l(0),T=()=>{t.customConfig?(n.value=0,s.value=24,i.value=0,d.value=0,p.value=0,c.value=0,f.value=24):(n.value=24,s.value=0,i.value=12,d.value=8,p.value=22,c.value=12,f.value=0)},h=["MYSQL","POSTGRESQL","ORACLE","SQLSERVER","CLICKHOUSE","HIVE"];return H(()=>{T()}),x(()=>t.customConfig,()=>{T()}),[{type:"switch",field:"customConfig",name:e("project.node.datax_custom_template")},...$(t,{typeField:"dsType",sourceField:"dataSource",span:i,supportedDatasourceType:h}),{type:"editor",field:"sql",name:e("project.node.sql_statement"),span:n,validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")}},{type:"editor",field:"json",name:e("project.node.datax_json_template"),span:s,validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")}},G(f),...$(t,{typeField:"dtType",sourceField:"dataTarget",span:d,supportedDatasourceType:h}),{type:"input",field:"targetTable",name:e("project.node.datax_target_table"),span:d,props:{placeholder:e("project.node.datax_target_table_tips")},validate:{trigger:["input","blur"],required:!0}},{type:"multi-input",field:"preStatements",name:e("project.node.datax_target_database_pre_sql"),span:p,props:{placeholder:e("project.node.datax_non_query_sql_tips"),type:"textarea",autosize:{minRows:1}}},{type:"multi-input",field:"postStatements",name:e("project.node.datax_target_database_post_sql"),span:p,props:{placeholder:e("project.node.datax_non_query_sql_tips"),type:"textarea",autosize:{minRows:1}}},{type:"select",field:"jobSpeedByte",name:e("project.node.datax_job_speed_byte"),span:c,options:o,value:0},{type:"select",field:"jobSpeedRecord",name:e("project.node.datax_job_speed_record"),span:c,options:a,value:1e3},{type:"select",field:"xms",name:e("project.node.datax_job_runtime_memory_xms"),span:12,options:r,value:1},{type:"select",field:"xmx",name:e("project.node.datax_job_runtime_memory_xmx"),span:12,options:r,value:1},...D({model:t,field:"localParams",isSimple:!0})]}function wt(t){const{t:e}=m(),o=U(),a=o.preTaskOptions.filter(n=>o.preTasks.includes(Number(n.value))),r=[{label:e("project.node.success"),value:"success"},{label:e("project.node.failed"),value:"failed"}];return[{type:"select",field:"successNode",name:e("project.node.state"),span:12,props:{disabled:!0},options:r},{type:"select",field:"successBranch",name:e("project.node.branch_flow"),span:12,props:{clearable:!0},validate:{trigger:["input","blur"],validator:(n,s)=>{if(s&&s===t.failedBranch)return new Error(e("project.node.branch_tips"))}},options:o.getPostTaskOptions},{type:"select",field:"failedNode",name:e("project.node.state"),span:12,props:{disabled:!0},options:r},{type:"select",field:"failedBranch",name:e("project.node.branch_flow"),span:12,props:{clearable:!0},validate:{trigger:["input","blur"],validator:(n,s)=>{if(s&&s===t.successBranch)return new Error(e("project.node.branch_tips"))}},options:o.getPostTaskOptions},...A(t),...ge({model:t,children:{type:"custom-parameters",field:"dependItemList",span:18,children:[{type:"select",field:"depTaskCode",span:10,options:a},{type:"select",field:"status",span:10,options:[{value:"SUCCESS",label:e("project.node.success")},{value:"FAILURE",label:e("project.node.failed")}]}]},childrenField:"dependItemList",name:"add_pre_task_check_condition"})]}function Et(t){const{t:e}=m(),o=de(),r=U().getDependentResult,n=Ge(e),s=l([]),i={},d={},p=l([]),c=[{value:"month",label:e("project.node.month")},{value:"week",label:e("project.node.week")},{value:"day",label:e("project.node.day")},{value:"hour",label:e("project.node.hour")}],f={hour:[{value:"currentHour",label:e("project.node.current_hour")},{value:"last1Hour",label:e("project.node.last_1_hour")},{value:"last2Hours",label:e("project.node.last_2_hour")},{value:"last3Hours",label:e("project.node.last_3_hour")},{value:"last24Hours",label:e("project.node.last_24_hour")}],day:[{value:"today",label:e("project.node.today")},{value:"last1Days",label:e("project.node.last_1_days")},{value:"last2Days",label:e("project.node.last_2_days")},{value:"last3Days",label:e("project.node.last_3_days")},{value:"last7Days",label:e("project.node.last_7_days")}],week:[{value:"thisWeek",label:e("project.node.this_week")},{value:"lastWeek",label:e("project.node.last_week")},{value:"lastMonday",label:e("project.node.last_monday")},{value:"lastTuesday",label:e("project.node.last_tuesday")},{value:"lastWednesday",label:e("project.node.last_wednesday")},{value:"lastThursday",label:e("project.node.last_thursday")},{value:"lastFriday",label:e("project.node.last_friday")},{value:"lastSaturday",label:e("project.node.last_saturday")},{value:"lastSunday",label:e("project.node.last_sunday")}],month:[{value:"thisMonth",label:e("project.node.this_month")},{value:"thisMonthBegin",label:e("project.node.this_month_begin")},{value:"lastMonth",label:e("project.node.last_month")},{value:"lastMonthBegin",label:e("project.node.last_month_begin")},{value:"lastMonthEnd",label:e("project.node.last_month_end")}]},T=async()=>{const b=await Ye();return s.value=b.map(g=>({value:g.code,label:()=>Y(z,null,g.name),filterLabel:g.name})),s},h=async b=>{if(i[b])return i[b];const y=(await qe(b)).map(u=>({value:u.code,label:()=>Y(z,null,u.name),filterLabel:u.name}));return i[b]=y,y},M=async(b,g)=>{if(d[g])return d[g];const u=(await Ie(b,g)).map(_=>({value:_.code,label:()=>Y(z,null,_.name),filterLabel:_.name}));return u.unshift({value:0,label:"ALL"}),d[g]=u,u},B=b=>{if(!b||o.currentRoute.value.name!=="workflow-instance-detail")return null;const g=`${b.definitionCode}-${b.depTaskCode}-${b.cycle}-${b.dateValue}`,y=r[g];return Y(me,{size:24,color:n[y].color},()=>Y(n[y].icon))};return H(()=>{T()}),x(()=>t.dependTaskList,b=>{p.value=[],b.forEach((g,y)=>{var _,j;if(!((_=g.dependItemList)!=null&&_.length))return;const u=l([]);(j=g.dependItemList)==null||j.forEach(async(F,V)=>{u.value[V]={},F.projectCode&&(u.value[V].definitionCodeOptions=await h(F.projectCode)),F.projectCode&&F.definitionCode&&(u.value[V].depTaskCodeOptions=await M(F.projectCode,F.definitionCode)),F.cycle&&(u.value[V].dateOptions=f[F.cycle])}),p.value[y]={},p.value[y].dependItemList=u.value})}),[...at(t),...ge({model:t,children:(b=0)=>({type:"custom-parameters",field:"dependItemList",span:18,children:[(g=0)=>({type:"select",field:"projectCode",name:e("project.node.project_name"),span:24,props:{filterable:!0,filter:(y,u)=>u.filterLabel.toLowerCase().includes(y.toLowerCase()),onUpdateValue:async y=>{const u=t.dependTaskList[b].dependItemList[g],_=(p==null?void 0:p.value[b])||{},j=(_==null?void 0:_.dependItemList)||[],F={};F.definitionCodeOptions=await h(y),j[g]=F,_.dependItemList=j,p.value[b]=_,u.depTaskCode=null,u.definitionCode=null}},options:s,path:`dependTaskList.${b}.dependItemList.${g}.projectCode`,rule:{required:!0,trigger:["input","blur"],validator(y,u){if(!u)return Error(e("project.node.project_name_tips"))}}}),(g=0)=>{var y,u;return{type:"select",field:"definitionCode",span:24,name:e("project.node.process_name"),props:{filterable:!0,filter:(_,j)=>j.filterLabel.toLowerCase().includes(_.toLowerCase()),onUpdateValue:async _=>{const j=t.dependTaskList[b].dependItemList[g];p.value[b].dependItemList[g].depTaskCodeOptions=await M(j.projectCode,_),j.depTaskCode=0}},options:((u=(y=p.value[b])==null?void 0:y.dependItemList[g])==null?void 0:u.definitionCodeOptions)||[],path:`dependTaskList.${b}.dependItemList.${g}.definitionCode`,rule:{required:!0,trigger:["input","blur"],validator(_,j){if(!j)return Error(e("project.node.process_name_tips"))}}}},(g=0)=>{var y,u;return{type:"select",field:"depTaskCode",span:24,name:e("project.node.task_name"),props:{filterable:!0,filter:(_,j)=>j.filterLabel.toLowerCase().includes(_.toLowerCase())},options:((u=(y=p.value[b])==null?void 0:y.dependItemList[g])==null?void 0:u.depTaskCodeOptions)||[],path:`dependTaskList.${b}.dependItemList.${g}.depTaskCode`,rule:{required:!0,trigger:["input","blur"],validator(_,j){if(!j&&j!==0)return Error(e("project.node.task_name_tips"))}}}},(g=0)=>({type:"select",field:"cycle",span:10,name:e("project.node.cycle_time"),props:{onUpdateValue:y=>{p.value[b].dependItemList[g].dateOptions=f[y],t.dependTaskList[b].dependItemList[g].dateValue=null}},options:c,path:`dependTaskList.${b}.dependItemList.${g}.cycle`,rule:{required:!0,trigger:["input","blur"],validator(y,u){if(!u)return Error(e("project.node.cycle_time_tips"))}}}),(g=0)=>{var y,u;return{type:"select",field:"dateValue",span:10,name:" ",options:((u=(y=p.value[b])==null?void 0:y.dependItemList[g])==null?void 0:u.dateOptions)||[],path:`dependTaskList.${b}.dependItemList.${g}.dateValue`,rule:{trigger:["input","blur"],validator(_,j){if(!j)return Error(e("project.node.date_tips"))}}}},(g=0)=>{var y;return{type:"custom",field:"state",span:2,name:" ",widget:B((y=t.dependTaskList[b])==null?void 0:y.dependItemList[g])}}]}),childrenField:"dependItemList",name:"add_dependency"})]}function Lt(t){const{t:e}=m(),o=v(()=>t.programType==="RUN_JOB_FLOW"?24:0),a=v(()=>t.programType==="ADD_JOB_FLOW_STEPS"?24:0);return[{type:"select",field:"programType",span:24,name:e("project.node.program_type"),options:Pt,validate:{required:!0}},{type:"editor",field:"jobFlowDefineJson",span:o,name:e("project.node.emr_flow_define_json"),props:{language:"json"},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.emr_flow_define_json_tips")}},{type:"editor",field:"stepsDefineJson",span:a,name:e("project.node.emr_steps_define_json"),props:{language:"json"},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.emr_steps_define_json_tips")}},...D({model:t,field:"localParams",isSimple:!0})]}const Pt=[{label:"RUN_JOB_FLOW",value:"RUN_JOB_FLOW"},{label:"ADD_JOB_FLOW_STEPS",value:"ADD_JOB_FLOW_STEPS"}];function Nt(t){const{t:e}=m();return[{type:"input",field:"noteId",name:e("project.node.zeppelin_note_id"),props:{placeholder:e("project.node.zeppelin_note_id_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.zeppelin_note_id_tips"))}}},{type:"input",field:"paragraphId",name:e("project.node.zeppelin_paragraph_id"),props:{placeholder:e("project.node.zeppelin_paragraph_id_tips")}},{type:"input",field:"restEndpoint",name:e("project.node.zeppelin_rest_endpoint"),props:{placeholder:e("project.node.zeppelin_rest_endpoint_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.zeppelin_rest_endpoint_tips"))}}},{type:"input",field:"productionNoteDirectory",name:e("project.node.zeppelin_production_note_directory"),props:{placeholder:e("project.node.zeppelin_production_note_directory_tips")}},{type:"input",field:"parameters",name:e("project.node.zeppelin_parameters"),props:{placeholder:e("project.node.zeppelin_parameters_tips")}},...D({model:t,field:"localParams",isSimple:!1})]}function Rt(){const{t}=m(),e=l([]),o=l(!1),a=async()=>{if(o.value)return;o.value=!0;const n=await Ve();e.value=(n||[]).map(s=>({label:`${s.namespace}(${s.clusterName})`,value:JSON.stringify({name:s.namespace,cluster:s.clusterName})})),o.value=!1};H(()=>{a()});const r=n=>n.type==="group"?n.label:[n.label];return{type:"select",field:"namespace",name:t("project.node.namespace_cluster"),props:{loading:o,"render-label":r},options:[{type:"group",label:t("project.node.namespace_cluster"),key:t("project.node.namespace_cluster"),children:e}]}}function Ct(t){const{t:e}=m();return[Rt(),{type:"input-number",field:"minCpuCores",span:12,props:{min:0},name:e("project.node.min_cpu"),slots:{suffix:()=>e("project.node.cores")}},{type:"input-number",field:"minMemorySpace",span:12,props:{min:0},name:e("project.node.min_memory"),slots:{suffix:()=>e("project.node.mb")}},{type:"input",field:"image",name:e("project.node.image"),props:{placeholder:e("project.node.image_tips")},validate:{trigger:["input","blur"],message:e("project.node.min_memory_tips")}},...D({model:t,field:"localParams",isSimple:!0})]}function Mt(t){const{t:e}=m();return[{type:"input",field:"condaEnvName",name:e("project.node.jupyter_conda_env_name"),props:{placeholder:e("project.node.jupyter_conda_env_name_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.jupyter_conda_env_name_tips"))}}},{type:"input",field:"inputNotePath",name:e("project.node.jupyter_input_note_path"),props:{placeholder:e("project.node.jupyter_input_note_path_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.jupyter_input_note_path_tips"))}}},{type:"input",field:"outputNotePath",name:e("project.node.jupyter_output_note_path"),props:{placeholder:e("project.node.jupyter_output_note_path_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.jupyter_output_note_path_tips"))}}},{type:"input",field:"parameters",name:e("project.node.jupyter_parameters"),props:{placeholder:e("project.node.jupyter_parameters_tips")}},{type:"input",field:"kernel",name:e("project.node.jupyter_kernel"),props:{placeholder:e("project.node.jupyter_kernel_tips")}},{type:"input",field:"engine",name:e("project.node.jupyter_engine"),props:{placeholder:e("project.node.jupyter_engine_tips")}},{type:"input",field:"executionTimeout",name:e("project.node.jupyter_execution_timeout"),props:{placeholder:e("project.node.jupyter_execution_timeout_tips")}},{type:"input",field:"startTimeout",name:e("project.node.jupyter_start_timeout"),props:{placeholder:e("project.node.jupyter_start_timeout_tips")}},{type:"input",field:"others",name:e("project.node.jupyter_others"),props:{placeholder:e("project.node.jupyter_others_tips")}},G(),...D({model:t,field:"localParams",isSimple:!1})]}const Ot=[{label:"MLflow Models",value:"MLflow Models"},{label:"MLflow Projects",value:"MLflow Projects"}];function At(t){const{t:e}=m();return[{type:"input",field:"mlflowTrackingUri",name:e("project.node.mlflow_mlflowTrackingUri"),span:12,props:{placeholder:e("project.node.mlflow_mlflowTrackingUri_tips")},validate:{trigger:["input","blur"],required:!1,validator(o,a){if(!a)return new Error(e("project.node.mlflow_mlflowTrackingUri_error_tips"))}}},{type:"select",field:"mlflowTaskType",name:e("project.node.mlflow_taskType"),span:12,options:Ot},...qt(t),...Gt(t),G(),...D({model:t,field:"localParams",isSimple:!0})]}function qt(t){const{t:e}=m(),o=l(0),a=l(0),r=l(0),n=l(0),s=l(0),i=l(0),d=()=>{t.isProjects=t.mlflowTaskType==="MLflow Projects"},p=()=>{o.value=t.isProjects?12:0,n.value=t.isProjects?12:0,i.value=t.isProjects?24:0,a.value=t.isProjects&&t.mlflowJobType!="CustomProject"?6:0,s.value=t.isProjects&&t.mlflowJobType!="CustomProject"?24:0};return x(()=>[t.mlflowTaskType,t.mlflowJobType],()=>{d(),p()}),x(()=>[t.registerModel],()=>{r.value=t.isProjects&&t.registerModel?6:0}),d(),p(),[{type:"select",field:"mlflowJobType",name:e("project.node.mlflow_jobType"),span:n,options:Ft},{type:"input",field:"experimentName",name:e("project.node.mlflow_experimentName"),span:o,props:{placeholder:e("project.node.mlflow_experimentName_tips")},validate:{trigger:["input","blur"],required:!1}},{type:"switch",field:"registerModel",name:e("project.node.mlflow_registerModel"),span:a},{type:"input",field:"modelName",name:e("project.node.mlflow_modelName"),span:r,props:{placeholder:e("project.node.mlflow_modelName_tips")},validate:{trigger:["input","blur"],required:!1}},{type:"input",field:"dataPath",name:e("project.node.mlflow_dataPath"),span:s,props:{placeholder:e("project.node.mlflow_dataPath_tips")}},{type:"input",field:"params",name:e("project.node.mlflow_params"),span:i,props:{placeholder:e("project.node.mlflow_params_tips")},validate:{trigger:["input","blur"],required:!1}},...It(t),...Dt(t),...xt(t)]}function It(t){const{t:e}=m(),o=l(0),a=l(0),r=()=>{t.isBasicAlgorithm=t.mlflowJobType==="BasicAlgorithm"&&t.mlflowTaskType==="MLflow Projects"},n=()=>{o.value=t.isBasicAlgorithm?24:0,a.value=t.isBasicAlgorithm?24:0};return x(()=>[t.mlflowTaskType,t.mlflowJobType],()=>{r(),n()}),r(),n(),[{type:"select",field:"algorithm",name:e("project.node.mlflow_algorithm"),span:o,options:Ht},{type:"input",field:"searchParams",name:e("project.node.mlflow_searchParams"),props:{placeholder:e("project.node.mlflow_searchParams_tips")},span:a,validate:{trigger:["input","blur"],required:!1}}]}function Dt(t){const{t:e}=m(),o=l(0),a=()=>{t.isAutoML=t.mlflowJobType==="AutoML"&&t.mlflowTaskType==="MLflow Projects"},r=()=>{o.value=t.isAutoML?12:0};return x(()=>[t.mlflowTaskType,t.mlflowJobType],()=>{a(),r()}),a(),r(),[{type:"select",field:"automlTool",name:e("project.node.mlflow_automlTool"),span:o,options:Yt}]}function xt(t){const{t:e}=m(),o=l(0),a=l(0),r=l(0),n=()=>{t.isCustomProject=t.mlflowJobType==="CustomProject"&&t.mlflowTaskType==="MLflow Projects"},s=()=>{o.value=t.isCustomProject?24:0,a.value=t.isCustomProject?12:0,r.value=t.isCustomProject?24:0};return x(()=>[t.mlflowTaskType,t.mlflowJobType],()=>{n(),s()}),n(),s(),[{type:"input",field:"mlflowProjectRepository",name:e("project.node.mlflowProjectRepository"),span:o,props:{placeholder:e("project.node.mlflowProjectRepository_tips")}},{type:"input",field:"mlflowProjectVersion",name:e("project.node.mlflowProjectVersion"),span:a,props:{placeholder:e("project.node.mlflowProjectVersion_tips")}}]}const Ft=[{label:"Custom Project",value:"CustomProject"},{label:"AutoML",value:"AutoML"},{label:"BasicAlgorithm",value:"BasicAlgorithm"}],Ht=[{label:"svm",value:"svm"},{label:"lr",value:"lr"},{label:"lightgbm",value:"lightgbm"},{label:"xgboost",value:"xgboost"}],Yt=[{label:"flaml",value:"flaml"},{label:"autosklearn",value:"autosklearn"}];function Gt(t){const{t:e}=m(),o=l(0),a=l(0),r=l(0),n=()=>{t.isModels=t.mlflowTaskType==="MLflow Models"},s=()=>{o.value=t.isModels?12:0,a.value=t.isModels?24:0,r.value=t.isModels?12:0};return x(()=>[t.mlflowTaskType],()=>{n(),s()}),n(),s(),[{type:"select",field:"deployType",name:e("project.node.mlflow_deployType"),span:o,options:Ut},{type:"input",field:"deployModelKey",name:e("project.node.mlflow_deployModelKey"),span:a},{type:"input",field:"deployPort",name:e("project.node.mlflow_deployPort"),span:r}]}const Ut=[{label:"MLFLOW",value:"MLFLOW"},{label:"DOCKER",value:"DOCKER"}];function Qt(t){const{t:e}=m(),o=[{label:e("project.node.openmldb_execute_mode_offline"),value:"offline"},{label:e("project.node.openmldb_execute_mode_online"),value:"online"}];return[{type:"input",field:"zk",name:e("project.node.openmldb_zk_address"),props:{placeholder:e("project.node.openmldb_zk_address_tips")},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.openmldb_zk_address_tips"))}}},{type:"input",field:"zkPath",name:e("project.node.openmldb_zk_path"),props:{placeholder:e("project.node.openmldb_zk_path_tips")},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.openmldb_zk_path_tips"))}}},{type:"radio",field:"executeMode",name:e("project.node.openmldb_execute_mode"),options:o},{type:"editor",field:"sql",name:e("project.node.sql_statement"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")}},G(),...D({model:t,field:"localParams",isSimple:!1})]}const Vt=[{label:"Upload",value:"Upload"},{label:"Download",value:"Download"},{label:"Init DVC",value:"Init DVC"}];function Wt(t){const{t:e}=m(),o=l(0),a=l(0),r=l(0),n=l(0),s=l(0),i=()=>{t.isUpload=t.dvcTaskType==="Upload",t.isDownload=t.dvcTaskType==="Download",t.isInit=t.dvcTaskType==="Init DVC"},d=()=>{o.value=t.isUpload||t.isDownload?24:0,a.value=t.isUpload||t.isDownload?24:0,r.value=t.isUpload||t.isDownload?24:0,n.value=t.isUpload?24:0,s.value=t.isInit?24:0};return x(()=>[t.dvcTaskType],()=>{i(),d()}),i(),d(),[{type:"select",field:"dvcTaskType",name:e("project.node.dvc_task_type"),span:12,options:Vt},{type:"input",field:"dvcRepository",name:e("project.node.dvc_repository"),span:24,props:{placeholder:e("project.node.dvc_repository_tips")},validate:{trigger:["input","blur"],required:!0,message:e("project.node.dvc_empty_tips")}},{type:"input",field:"dvcDataLocation",name:e("project.node.dvc_data_location"),props:{placeholder:"dvcDataLocation"},span:a,validate:{trigger:["input","blur"],required:!0,validator(p,c){if((t.isUpload||t.isDownload)&&!c)return new Error(e("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcLoadSaveDataPath",name:e("project.node.dvc_load_save_data_path"),span:o,validate:{trigger:["input","blur"],required:!0,validator(p,c){if((t.isUpload||t.isDownload)&&!c)return new Error(e("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcVersion",name:e("project.node.dvc_version"),span:r,props:{placeholder:e("project.node.dvc_version_tips")},validate:{trigger:["input","blur"],required:!0,validator(p,c){if((t.isUpload||t.isDownload)&&!c)return new Error(e("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcMessage",name:e("project.node.dvc_message"),span:n,validate:{trigger:["input","blur"],required:!0,validator(p,c){if(t.isUpload&&!c)return new Error(e("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcStoreUrl",name:e("project.node.dvc_store_url"),span:s,validate:{trigger:["input","blur"],required:!0,validator(p,c){if(!t.isInit&&c)return new Error(e("project.node.dvc_empty_tips"))}}}]}function Bt(t){const{t:e}=m();return[{type:"input",field:"address",name:e("project.node.dinky_address"),props:{placeholder:e("project.node.dinky_address_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.dinky_address_tips"))}}},{type:"input",field:"taskId",name:e("project.node.dinky_task_id"),props:{placeholder:e("project.node.dinky_task_id_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.dinky_task_id_tips"))}}},{type:"switch",field:"online",name:e("project.node.dinky_online")},...D({model:t,field:"localParams",isSimple:!1})]}function Jt(t){return[{type:"editor",field:"sagemakerRequestJson",name:"SagemakerRequestJson",props:{language:"json"},validate:{trigger:["input","trigger"],required:!0,message:"requestJson"}},...D({model:t,field:"localParams",isSimple:!1})]}function $t(t){const{t:e}=m(),o=l(0),a=l(0),r=()=>{o.value=24,a.value=24};return H(()=>{r()}),[{type:"editor",field:"json",name:e("project.node.chunjun_json_template"),span:o,validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")}},{type:"custom-parameters",field:"localParams",name:e("project.node.custom_parameters"),span:a,children:[{type:"input",field:"prop",span:10,props:{placeholder:e("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(n,s){if(!s)return new Error(e("project.node.prop_tips"));if(t.localParams.filter(d=>d.prop===s).length>1)return new Error(e("project.node.prop_repeat"))}}},{type:"input",field:"value",span:10,props:{placeholder:e("project.node.value_tips"),maxLength:256}}]},Kt(24),{type:"input",field:"others",name:e("project.node.option_parameters"),props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}}]}function Kt(t=24){const{t:e}=m();return{type:"radio",field:"deployMode",name:e("project.node.deploy_mode"),options:zt,span:t}}const zt=[{label:"local",value:"local"},{label:"standlone",value:"standlone"},{label:"yarn-session",value:"yarn-session"},{label:"yarn-per-job",value:"yarn-per-job"}];function Xt(t){const{t:e}=m(),o=l(0),a=l(0),r=l(0),n=l(0),s=l(0),i=l(0),d=()=>{t.showCreateEnvironment=t.isCreateEnvironment&&t.otherParams,t.showCreateConda=!!(t.showCreateEnvironment&&t.pythonEnvTool==="conda"),t.showCreateEnv=!!(t.showCreateEnvironment&&t.pythonEnvTool==="virtualenv")},p=()=>{o.value=t.otherParams?12:0,a.value=t.otherParams?24:0,r.value=t.showCreateEnvironment?12:0,n.value=~t.showCreateEnvironment&t.otherParams?12:0,s.value=t.showCreateEnvironment?24:0,i.value=t.showCreateConda?24:0};return x(()=>[t.isCreateEnvironment,t.pythonEnvTool,t.otherParams],()=>{d(),p()}),[{type:"input",field:"script",name:e("project.node.pytorch_script"),span:24},{type:"input",field:"scriptParams",name:e("project.node.pytorch_script_params"),span:24},{type:"switch",field:"otherParams",name:e("project.node.pytorch_other_params"),span:24},{type:"input",field:"pythonPath",name:e("project.node.pytorch_python_path"),span:a},{type:"switch",field:"isCreateEnvironment",name:e("project.node.pytorch_is_create_environment"),span:o},{type:"input",field:"pythonCommand",name:e("project.node.pytorch_python_command"),span:n,props:{placeholder:e("project.node.pytorch_python_command_tips")}},{type:"select",field:"pythonEnvTool",name:e("project.node.pytorch_python_env_tool"),span:r,options:Zt},{type:"input",field:"requirements",name:e("project.node.pytorch_requirements"),span:s},{type:"input",field:"condaPythonVersion",name:e("project.node.pytorch_conda_python_version"),span:i,props:{placeholder:e("project.node.pytorch_conda_python_version_tips")}},G(),...D({model:t,field:"localParams",isSimple:!1})]}const Zt=[{label:"conda",value:"conda"},{label:"virtualenv",value:"virtualenv"}];function er(t){const{t:e}=m();return[{type:"select",field:"hiveCliTaskExecutionType",span:12,name:e("project.node.hive_cli_task_execution_type"),options:tr},{type:"editor",field:"hiveSqlScript",name:e("project.node.hive_sql_script"),props:{language:"sql"}},{type:"input",field:"hiveCliOptions",name:e("project.node.hive_cli_options"),props:{placeholder:e("project.node.hive_cli_options_tips")}},G(),...D({model:t,field:"localParams",isSimple:!1})]}const tr=[{label:"FROM_SCRIPT",value:"SCRIPT"},{label:"FROM_FILE",value:"FILE"}];function rr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({taskType:"FLINK",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",deployMode:"cluster",initScript:"",rawScript:"",flinkVersion:"<1.10",jobManagerMemory:"1G",taskManagerMemory:"2G",slot:1,taskManager:2,parallelism:1,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!(a!=null&&a.id)),...C(r,t),...O(),I(r),...A(r),...we(r),R()],model:r}}function ar({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({taskType:"FLINK_STREAM",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",deployMode:"cluster",initScript:"",rawScript:"",flinkVersion:"<1.10",jobManagerMemory:"1G",taskManagerMemory:"2G",slot:1,taskManager:2,parallelism:1,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!(a!=null&&a.id)),I(r),...we(r),R()],model:r}}function or({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({taskType:"SHELL",name:"",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],timeout:30,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,rawScript:""});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!(a!=null&&a.id)),...C(r,t),...O(),...Q(),I(r),...A(r),...ke(r),R()],model:r}}function nr({projectCode:t,from:e=0,readonly:o,data:a}){const n=de().currentRoute.value.params.code,s=S({taskType:"SUB_PROCESS",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:s}),w(),E(),L(),P(),N(s,!(a!=null&&a.id)),...C(s,t),...A(s),We({model:s,projectCode:t,from:e,processName:a==null?void 0:a.processName,code:e===1?0:Number(n)}),R()],model:s}}function sr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({taskType:"PIGEON",name:"",flag:"YES",description:"",timeoutFlag:!1,environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,targetJobName:"",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!(a!=null&&a.id)),...C(r,t),...O(),I(r),...A(r),Be(),R()],model:r}}function ir({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"PYTHON",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,rawScript:"",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),...Q(),I(r),...A(r),...ke(r),R()],model:r}}function lr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({taskType:"SPARK",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",sparkVersion:"SPARK2",rawScript:"",deployMode:"local",driverCores:1,driverMemory:"512M",numExecutors:2,executorMemory:"2G",executorCores:2,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!(a!=null&&a.id)),...C(r,t),...O(),I(r),...A(r),...nt(r),R()],model:r}}function pr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({taskType:"MR",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!(a!=null&&a.id)),...C(r,t),...O(),I(r),...A(r),...lt(r),R()],model:r}}function ur({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({taskType:"HTTP",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,httpMethod:"GET",httpCheckCondition:"STATUS_CODE_DEFAULT",httpParams:[],url:"",condition:"",connectTimeout:6e4,socketTimeout:6e4,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!(a!=null&&a.id)),...C(r,t),...O(),I(r),...A(r),...dt(r),R()],model:r}}function cr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"SQL",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,type:"MYSQL",displayRows:10,segmentSeparator:"",sql:"",sqlType:"0",preStatements:[],postStatements:[],udfs:[],timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),I(r),...A(r),...$(r),...Je(r),..._t(r),R()],model:r}}function dr({projectCode:t,from:e=0,readonly:o,data:a}){var n,s,i,d;const r=S({name:"",taskType:"PROCEDURE",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,type:(n=a==null?void 0:a.taskParams)!=null&&n.type?(s=a==null?void 0:a.taskParams)==null?void 0:s.type:"MYSQL",datasource:(i=a==null?void 0:a.taskParams)==null?void 0:i.datasource,method:(d=a==null?void 0:a.taskParams)==null?void 0:d.method,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),I(r),...A(r),...$(r),...Ke(r),R()],model:r}}function mr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({taskType:"SQOOP",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,isCustomTask:!1,hadoopCustomParams:[],sqoopAdvancedParams:[],mapColumnHive:[],mapColumnJava:[],modelType:"import",sourceType:"MYSQL",srcQueryType:"1",srcColumnType:"0",targetType:"HDFS",sourceMysqlType:"MYSQL",targetHdfsDeleteTargetDir:!0,targetHdfsCompressionCodec:"snappy",targetHdfsFileType:"--as-avrodatafile",targetMysqlType:"MYSQL",targetMysqlUpdateMode:"allowinsert",targetHiveCreateTable:!1,targetHiveDropDelimiter:!1,targetHiveOverWrite:!0,concurrency:1,splitBy:"",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!(a!=null&&a.id)),...C(r,t),...O(),...Q(),I(r),...A(r),...vt(r),R()],model:r}}function fr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"SEATUNNEL",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,startupScript:"seatunnel.sh",runMode:"RUN",useCustom:!0,deployMode:"client",master:"YARN",masterUrl:"",resourceFiles:[],timeoutNotifyStrategy:["WARN"],rawScript:`env {
  execution.parallelism = 2
  job.mode = "BATCH"
  checkpoint.interval = 10000
}

source {
  FakeSource {
    parallelism = 2
    result_table_name = "fake"
    row.num = 16
    schema = {
      fields {
        name = "string"
        age = "int"
      }
    }
  }
}

sink {
  Console {
  }
}`});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),...Q(),I(r),...A(r),...jt(r),R()],model:r}}function yr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({taskType:"SWITCH",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,rawScript:"",switchResult:{},dependTaskList:[],nextNode:void 0,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!(a!=null&&a.id)),...C(r,t),...O(),I(r),...A(r),...St(r,t),R()],model:r}}function _r({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({taskType:"CONDITIONS",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",timeout:30,relation:"AND",dependTaskList:[],preTasks:[],successNode:"success",failedNode:"failed",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!(a!=null&&a.id)),...C(r,t),...O(),...wt(r),R()],model:r}}function vr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"DATAX",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,customConfig:!1,dsType:"MYSQL",dtType:"MYSQL",preStatements:[],postStatements:[],timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),...Q(),I(r),...A(r),...kt(r),R()],model:r}}function gr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({taskType:"DEPENDENT",name:"",flag:"YES",description:"",timeoutShowFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,relation:"AND",dependTaskList:[],preTasks:[],timeoutNotifyStrategy:[],timeout:30,timeoutFlag:!1,...a});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!(a!=null&&a.id)),...C(r,t),...O(),...Et(r),R()],model:r}}function jr({projectCode:t,from:e=0,readonly:o,data:a,jsonRef:r,updateElements:n}){const{t:s}=m(),i=S({taskType:"DATA_QUALITY",name:"",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],timeout:30,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,ruleId:1,deployMode:"cluster",driverCores:1,driverMemory:"512M",numExecutors:2,executorMemory:"2G",executorCores:2,others:"--conf spark.yarn.maxAppAttempts=1"});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:i}),w(),E(),L(),P(),N(i,!(a!=null&&a.id)),...C(i,t),...O(),I(i),...A(i),...ot(i,(d,p)=>{r.value.splice(15,p,...d),n()}),oe(),je(),Te(),be(),he(),Se(),{type:"input",field:"others",name:s("project.node.option_parameters"),props:{type:"textarea",placeholder:s("project.node.option_parameters_tips")}},...D({model:i,field:"localParams",isSimple:!0}),R()],model:i}}function Tr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"EMR",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"ADD_JOB_FLOW_STEPS",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),I(r),...A(r),...Lt(r),R()],model:r}}function br({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"ZEPPELIN",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),I(r),...A(r),...Nt(r),R()],model:r}}function hr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"K8S",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),I(r),...A(r),...Ct(r),R()],model:r}}function Sr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"JUPYTER",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),...Q(),I(r),...A(r),...Mt(r),R()],model:r}}function kr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"MLFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",algorithm:"svm",mlflowTrackingUri:"http://127.0.0.1:5000",mlflowTaskType:"MLflow Projects",deployType:"MLFLOW",deployPort:"7000",mlflowJobType:"CustomProject",automlTool:"flaml",mlflowCustomProjectParameters:[],delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),I(r),...A(r),...At(r),R()],model:r}}function wr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"OPENMLDB",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,zk:"",zkPath:"",executeMode:"offline"});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),I(r),...A(r),...Qt(r),R()],model:r}}function Er({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"MLFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],dvcTaskType:"Upload"});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),I(r),...A(r),...Wt(r),R()],model:r}}function Lr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"DINKY",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),I(r),...A(r),...Bt(r),R()],model:r}}function Pr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"MLFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),I(r),...A(r),...Jt(r),R()],model:r}}function Nr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"CHUNJUN",flag:"YES",description:"",deployMode:"local",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,customConfig:!0,preStatements:[],postStatements:[],timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),I(r),...A(r),...$t(r),R()],model:r}}function Rr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"PYTORCH",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],pythonEnvTool:"conda",pythonCommand:"${PYTHON_HOME}",condaPythonVersion:"3.7",requirements:"requirements.txt",pythonPath:"."});let n=[];return e===1&&(n=[re(r,o),ae({model:r,projectCode:t,isCreate:!(a!=null&&a.id),from:e,processName:a==null?void 0:a.processName})]),{json:[k(e),...n,w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),...Q(),I(r),...A(r),...Xt(r),R()],model:r}}function Cr({projectCode:t,from:e=0,readonly:o,data:a}){const r=S({name:"",taskType:"HIVECLI",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30});let n=[];return e===1&&(n=[re(r,o),ae({model:r,projectCode:t,isCreate:!(a!=null&&a.id),from:e,processName:a==null?void 0:a.processName})]),{json:[k(e),...n,w(),E(),L(),P(),N(r,!r.id),...C(r,t),...O(),I(r),...A(r),...er(r),R()],model:r}}const Mr={SHELL:or,SUB_PROCESS:nr,PYTHON:ir,SPARK:lr,MR:pr,FLINK:rr,HTTP:ur,PIGEON:sr,SQL:cr,PROCEDURE:dr,SQOOP:mr,SEATUNNEL:fr,SWITCH:yr,CONDITIONS:_r,DATAX:vr,DEPENDENT:gr,DATA_QUALITY:jr,EMR:Tr,ZEPPELIN:br,K8S:hr,JUPYTER:Sr,MLFLOW:kr,OPENMLDB:wr,DVC:Er,DINKY:Lr,SAGEMAKER:Pr,CHUNJUN:Nr,FLINK_STREAM:ar,PYTORCH:Rr,HIVECLI:Cr};function Or({data:t,projectCode:e,from:o,readonly:a,definition:r}){const n=U();n.updateDefinition(Z(r),t==null?void 0:t.code);const s=l([]),i=l([]),d=l({}),p={projectCode:e,from:o,readonly:a,data:t,jsonRef:s,updateElements:()=>{T()}},{model:c,json:f}=Mr[t.taskType||"SHELL"](p);s.value=f,c.preTasks=n.getPreTasks,c.name=n.getName,c.taskExecuteType=fe[t.taskType||"SHELL"].taskExecuteType||"BATCH";const T=()=>{const{rules:h,elements:M}=Ee(s.value,c);i.value=M,d.value=h};return T(),{elementsRef:i,rulesRef:d,model:c}}const Qa=Ne({name:"NodeDetail",emits:["taskTypeChange"],setup(t,{expose:e,emit:o}){const a=U(),r=l(),n=Ce("data")||{projectCode:0,data:{taskType:"SHELL"},readonly:!1,from:0},{data:s,projectCode:i,from:d,readonly:p,definition:c}=Z(n),{elementsRef:f,rulesRef:T,model:h}=Or({data:s,projectCode:i,from:d,readonly:p,definition:c});return x(()=>h.taskType,async M=>{a.updateName(h.name||""),o("taskTypeChange",M)}),e(r),()=>Re(Le,{ref:r,meta:{model:h,rules:T.value,elements:f.value,disabled:Z(p)},layout:{xGap:10}},null)}});export{Qa as default};
