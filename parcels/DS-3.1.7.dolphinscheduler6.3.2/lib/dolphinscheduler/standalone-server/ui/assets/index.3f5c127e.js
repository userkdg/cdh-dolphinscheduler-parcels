import{C as y}from"./index.76253dc2.js";import{u as N,t as M,b5 as T,a as u,d as U,at as O,e as G,ba as H,c as a,ak as W}from"./index.ccaa682a.js";import{b as q}from"./index.22db9fb0.js";import{e as x}from"./index.fd192f71.js";import L from"./table-action.9bc679cd.js";import{_ as A}from"./lodash.02988b15.js";import{p as b}from"./common.0c468cf3.js";import{C as d,c as F,D as V}from"./column-width-config.d330f121.js";import{f as z}from"./index.15a20265.js";import B from"./form-modal.86aca219.js";import{S as X}from"./SearchOutlined.2201cd30.js";import{N as h}from"./Space.f435ce00.js";import{N as S}from"./Button.3394f0e3.js";import{N as E}from"./Input.f12e0137.js";import{N as J}from"./Icon.808259cb.js";import{N as K,a as Q}from"./DataTable.f685dba1.js";import"./Card.915ef7d2.js";import"./use-rtl.d43d8217.js";import"./resolve-slot.d8d7b3cb.js";import"./index.7a579f81.js";import"./keysOf.10525521.js";import"./service.ae1ed8a7.js";import"./EditOutlined.84f6aa5d.js";import"./Tooltip.14e7654c.js";import"./Popover.b48d5d17.js";import"./index.99c68204.js";import"./flatten.995f807f.js";import"./Scrollbar.0dc514b7.js";import"./fade-in.cssr.ac08f6bb.js";import"./VResizeObserver.c3d2397d.js";import"./utils.381519a7.js";import"./format-length.a0cbed4d.js";import"./use-compitable.d1fd83c6.js";import"./next-frame-once.e5ee25e8.js";import"./Switch.97f1d4b9.js";import"./is-browser.f4bc45cf.js";import"./get-slot.7f666ba0.js";import"./SettingOutlined.675e55ec.js";import"./PauseCircleOutlined.f81cacab.js";import"./CloseCircleOutlined.7f4d3411.js";import"./CheckCircleOutlined.b6132804.js";import"./index.c665300e.js";import"./index.c1fd473c.js";import"./fade-in-scale-up.cssr.5995d390.js";import"./Form.b41344c3.js";import"./FormItem.6b297844.js";import"./Select.a0f44759.js";import"./use-locale.ca4c738c.js";import"./Selection.57d091a8.js";import"./Suffix.584d00eb.js";import"./InputNumber.9bdbbaa6.js";import"./Add.57f827bb.js";import"./ArrowDown.c45c82c0.js";import"./Checkbox.ff1b56b7.js";import"./RadioGroup.8830dbe4.js";import"./Radio.0f909e72.js";import"./Dropdown.16d7f975.js";import"./ChevronRight.efc71575.js";import"./use-keyboard.db487137.js";import"./Ellipsis.31968545.js";import"./Forward.6cc09413.js";function C(s=(o,n,e,g,i,p)=>{},r=()=>{}){const{t:o}=N(),n=[{title:"#",key:"index",render:(i,p)=>p+1,...d.index},{title:o("resource.task_group_option.name"),key:"name",...d.name},{title:o("resource.task_group_option.project_name"),key:"projectName",...d.name},{title:o("resource.task_group_option.resource_pool_size"),key:"groupSize",width:160},{title:o("resource.task_group_option.resource_used_pool_size"),key:"useSize",width:140},{title:o("resource.task_group_option.desc"),key:"description",...d.note},{title:o("resource.task_group_option.create_time"),key:"createTime",...d.time},{title:o("resource.task_group_option.update_time"),key:"updateTime",...d.time},{title:o("resource.task_group_option.actions"),key:"actions",...d.operation(3),render:i=>M(L,{row:i,onResetTableData:()=>{e.page>1&&e.tableData.length===1&&(e.page-=1),r()},onUpdateItem:(p,t,f,m,l,_)=>{s(p,t,f,m,l,_)}})}],e=T({tableData:[],tableWidth:F(n)||V,page:u(1),pageSize:u(10),name:u(null),totalPage:u(1),loadingRef:u(!1)});return{getTableData:i=>{e.loadingRef||(e.loadingRef=!0,Promise.all([q(i),x()]).then(p=>{e.totalPage=p[0].totalPage,e.tableData=p[0].totalList.map((t,f)=>{let m="";if(p[1]){const l=A.find(p[1],{code:t.projectCode});l&&(m=l.name)}return t.projectName=m,t.createTime=z(b(t.createTime),"yyyy-MM-dd HH:mm:ss"),t.updateTime=z(b(t.updateTime),"yyyy-MM-dd HH:mm:ss"),{...t}}),e.loadingRef=!1}))},variables:e,columns:n}}function Y(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!W(s)}const it=U({name:"taskGroupOption",setup(){var k;const{t:s}=N(),{variables:r,getTableData:o}=C(),n=u(!1),e=u(0),g=u(),i=T({id:0,name:"",projectCode:0,groupSize:0,status:1,description:""}),p=()=>{o({pageSize:r.pageSize,pageNo:r.page,name:r.name})},t=()=>{o({pageSize:r.pageSize,pageNo:r.page,name:r.name})},f=()=>{n.value=!1},m=()=>{n.value=!1,t()},l=()=>{r.page=1,t()},_=(P,I,R,w,v)=>{e.value=1,n.value=!0,i.id=P,i.name=I,i.projectCode=R,i.groupSize=w,i.description=v},c=()=>{t()},D=()=>{e.value=0,n.value=!0},j=(k=O())==null?void 0:k.appContext.config.globalProperties.trim;return G(()=>{p()}),{...H(r),t:s,onCreate:D,onSearch:c,searchParamRef:g,resetTableData:t,onUpdatePageSize:l,updateItem:_,showModalRef:n,modelStatusRef:e,onCancel:f,onConfirm:m,updateItemData:i,trim:j}},render(){let s;const{t:r,showModalRef:o,modelStatusRef:n,onCancel:e,onConfirm:g,updateItemData:i,resetTableData:p,onUpdatePageSize:t,updateItem:f,onSearch:m,loadingRef:l}=this,{columns:_}=C(f,p);return a(h,{vertical:!0},{default:()=>[a(y,null,{default:()=>[a(h,{justify:"space-between"},{default:()=>[a(S,{size:"small",type:"primary",onClick:()=>this.onCreate()},Y(s=r("resource.task_group_option.create"))?s:{default:()=>[s]}),a(h,null,{default:()=>[a(E,{allowInput:this.trim,size:"small",value:this.name,"onUpdate:value":c=>this.name=c,placeholder:r("resource.task_group_option.please_enter_keywords")},null),a(S,{size:"small",type:"primary",onClick:m},{default:()=>[a(J,null,{default:()=>[a(X,null,null)]})]})]})]})]}),a(y,{title:r("resource.task_group_option.option")},{default:()=>[a(h,{vertical:!0},{default:()=>[a(K,{loading:l,columns:_,size:"small",data:this.tableData,striped:!0,scrollX:this.tableWidth},null),a(h,{justify:"center"},{default:()=>[a(Q,{page:this.page,"onUpdate:page":c=>this.page=c,"page-size":this.pageSize,"onUpdate:page-size":c=>this.pageSize=c,"page-count":this.totalPage,"show-size-picker":!0,"page-sizes":[10,30,50],"show-quick-jumper":!0,onUpdatePage:p,onUpdatePageSize:t},null)]})]})]}),o&&a(B,{show:o,onCancel:e,onConfirm:g,data:i,status:n},null)]})}});export{it as default};
